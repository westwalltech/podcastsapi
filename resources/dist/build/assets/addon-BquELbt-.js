const{Fieldtype:g,IndexFieldtype:Te,FieldtypeMixin:Me,HasActionsMixin:Re,HasInputOptionsMixin:Ae,HasPreferencesMixin:_e,IndexFieldtypeMixin:Le,InlineEditForm:Ee,DateFormatter:Ye,ItemActions:Ie,RelatedItem:De,RestoreRevision:ze,RevisionHistory:Pe,RevisionPreview:Ve,SaveButtonOptions:Be,SortableList:He,requireElevatedSession:Ue,requireElevatedSessionIf:Fe,clone:Ne,deepClone:Oe,resetValuesFromResponse:We}=__STATAMIC__.core,S=window.Vue,{BaseTransition:je,BaseTransitionPropsValidators:Qe,Comment:Ke,DeprecationTypes:qe,EffectScope:Ge,ErrorCodes:Je,ErrorTypeStrings:Xe,Fragment:y,KeepAlive:Ze,ReactiveEffect:$e,Static:et,Suspense:tt,Teleport:st,Text:lt,TrackOpTypes:ot,Transition:rt,TransitionGroup:it,TriggerOpTypes:nt,VueElement:at,__esModule:dt,assertNumber:ut,callWithAsyncErrorHandling:pt,callWithErrorHandling:ct,camelize:ft,capitalize:mt,cloneVNode:ht,compatUtils:yt,compile:vt,computed:bt,createApp:kt,createBlock:gt,createCommentVNode:d,createElementBlock:r,createElementVNode:t,createHydrationRenderer:xt,createPropsRestProxy:St,createRenderer:Ct,createSSRApp:wt,createSlots:Tt,createStaticVNode:C,createTextVNode:w,createVNode:Mt,customRef:Rt,defineAsyncComponent:At,defineComponent:_t,defineCustomElement:Lt,defineEmits:Et,defineExpose:Yt,defineModel:It,defineOptions:Dt,defineProps:zt,defineSSRCustomElement:Pt,defineSlots:Vt,devtools:Bt,effect:Ht,effectScope:Ut,getCurrentInstance:Ft,getCurrentScope:Nt,getCurrentWatcher:Ot,getTransitionRawChildren:Wt,guardReactiveProps:jt,h:Qt,handleError:Kt,hasInjectionContext:qt,hydrate:Gt,hydrateOnIdle:Jt,hydrateOnInteraction:Xt,hydrateOnMediaQuery:Zt,hydrateOnVisible:$t,initCustomFormatter:es,initDirectivesForSSR:ts,inject:ss,isMemoSame:ls,isProxy:os,isReactive:rs,isReadonly:is,isRef:ns,isRuntimeOnly:as,isShallow:ds,isVNode:us,markRaw:ps,mergeDefaults:cs,mergeModels:fs,mergeProps:ms,nextTick:hs,nodeOps:ys,normalizeClass:m,normalizeProps:vs,normalizeStyle:u,onActivated:bs,onBeforeMount:ks,onBeforeUnmount:gs,onBeforeUpdate:xs,onDeactivated:Ss,onErrorCaptured:Cs,onMounted:ws,onRenderTracked:Ts,onRenderTriggered:Ms,onScopeDispose:Rs,onServerPrefetch:As,onUnmounted:_s,onUpdated:Ls,onWatcherCleanup:Es,openBlock:i,patchProp:Ys,popScopeId:Is,provide:Ds,proxyRefs:zs,pushScopeId:Ps,queuePostFlushCb:Vs,reactive:Bs,readonly:Hs,ref:Us,registerRuntimeCompiler:Fs,render:Ns,renderList:v,renderSlot:Os,resolveComponent:Ws,resolveDirective:js,resolveDynamicComponent:Qs,resolveFilter:Ks,resolveTransitionHooks:qs,setBlockTracking:Gs,setDevtoolsHook:Js,setTransitionHooks:Xs,shallowReactive:Zs,shallowReadonly:$s,shallowRef:el,ssrContextKey:tl,ssrUtils:sl,stop:ll,toDisplayString:a,toHandlerKey:ol,toHandlers:rl,toRaw:il,toRef:nl,toRefs:al,toValue:dl,transformVNodeArgs:ul,triggerRef:pl,unref:cl,useAttrs:fl,useCssModule:ml,useCssVars:hl,useHost:yl,useId:vl,useModel:bl,useSSRContext:kl,useShadowRoot:gl,useSlots:xl,useTemplateRef:Sl,useTransitionState:Cl,vModelCheckbox:wl,vModelDynamic:Tl,vModelRadio:Ml,vModelSelect:c,vModelText:b,vShow:Rl,version:Al,warn:_l,watch:Ll,watchEffect:El,watchPostEffect:Yl,watchSyncEffect:Il,withAsyncContext:Dl,withCtx:zl,withDefaults:Pl,withDirectives:p,withKeys:Vl,withMemo:Bl,withModifiers:Hl,withScopeId:Ul}=S,x=(n,e)=>{const h=n.__vccOpts||n;for(const[k,l]of e)h[k]=l;return h},T={mixins:[g],computed:{isDarkMode(){return document.documentElement.classList.contains("dark")},selectedEpisodeStyle(){return this.isDarkMode?{backgroundColor:"#1a1a1a",borderColor:"#374151"}:{backgroundColor:"#eff6ff",borderColor:"#bfdbfe"}},searchingStyle(){return this.isDarkMode?{backgroundColor:"#1a1a1a",borderColor:"#374151",color:"#93c5fd"}:{backgroundColor:"#eff6ff",borderColor:"#bfdbfe",color:"#1e40af"}},youtubeHeaderStyle(){return this.isDarkMode?{backgroundColor:"rgba(127, 29, 29, 0.3)",borderColor:"#7f1d1d",color:"#fca5a5"}:{backgroundColor:"#fef2f2",borderColor:"#fecaca",color:"#b91c1c"}},spotifyHeaderStyle(){return this.isDarkMode?{backgroundColor:"rgba(20, 83, 45, 0.3)",borderColor:"#14532d",color:"#86efac"}:{backgroundColor:"#f0fdf4",borderColor:"#bbf7d0",color:"#15803d"}},appleHeaderStyle(){return this.isDarkMode?{backgroundColor:"rgba(88, 28, 135, 0.3)",borderColor:"#581c87",color:"#d8b4fe"}:{backgroundColor:"#faf5ff",borderColor:"#e9d5ff",color:"#7e22ce"}},errorStyle(){return this.isDarkMode?{backgroundColor:"rgba(127, 29, 29, 0.2)",borderColor:"#b91c1c",color:"#fca5a5"}:{backgroundColor:"#fee2e2",borderColor:"#f87171",color:"#b91c1c"}},resultCountStyle(){return this.isDarkMode?{backgroundColor:"rgba(0, 0, 0, 0.3)",color:"inherit"}:{backgroundColor:"rgba(255, 255, 255, 0.7)",color:"inherit"}}},data(){return{episodes:[],searchQuery:"",episodeStatus:"published",episodeLimit:20,selectedEpisodeId:null,loading:!1,searchingPlatforms:!1,searchingYouTube:!1,error:null,searchTimeout:null,platformResults:null,platformWarnings:null,selectedYouTube:null,selectedSpotify:null,selectedApple:null,manualYouTube:"",manualSpotify:"",manualApple:""}},mounted(){this.loadEpisodes(),this.value&&this.value.episode_id&&(this.selectedEpisodeId=this.value.episode_id,this.selectedYouTube=this.value.youtube_link||null,this.selectedSpotify=this.value.spotify_link||null,this.selectedApple=this.value.apple_podcasts_link||null,this.manualYouTube=this.value.youtube_link||"",this.manualSpotify=this.value.spotify_link||"",this.manualApple=this.value.apple_podcasts_link||"")},methods:{async loadEpisodes(n=""){this.loading=!0,this.error=null;try{const e=await this.$axios.get("/cp/podcast-link-finder/search-episodes",{params:{query:n,status:this.episodeStatus,limit:this.episodeLimit}});this.episodes=e.data.episodes||[]}catch(e){this.error="Failed to load episodes. Please check your API credentials.",console.error(e)}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadEpisodes(this.searchQuery)},500)},async onEpisodeSelected(){if(!this.selectedEpisodeId){this.update({episode_id:null,episode_title:null,spotify_link:null,apple_podcasts_link:null,youtube_link:null}),this.platformResults=null,this.selectedYouTube=null,this.selectedSpotify=null,this.selectedApple=null,this.manualYouTube="",this.manualSpotify="",this.manualApple="";return}const n=this.episodes.find(e=>e.id===this.selectedEpisodeId);this.update({episode_id:n.id,episode_title:n.title,spotify_link:null,apple_podcasts_link:null,youtube_link:null}),this.platformResults=null,this.platformWarnings=null,this.selectedYouTube=null,this.selectedSpotify=null,this.selectedApple=null,this.manualYouTube="",this.manualSpotify="",this.manualApple="",this.config.auto_find!==!1&&await this.searchAllPlatforms()},async searchAllPlatforms(n=!1){this.searchingPlatforms=!0,this.error=null;try{const e=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId,force_youtube:n});e.data.success&&(this.platformResults=e.data.results,this.platformWarnings=e.data.warnings||null,this.config.auto_find!==!1&&(this.platformResults.youtube.length>0&&(this.selectedYouTube=this.platformResults.youtube[0].url,this.onYouTubeSelected()),this.platformResults.spotify.length>0&&(this.selectedSpotify=this.platformResults.spotify[0].url,this.onSpotifySelected()),this.platformResults.apple_podcasts.length>0&&(this.selectedApple=this.platformResults.apple_podcasts[0].url,this.onAppleSelected())))}catch(e){this.error="Failed to search platforms. You can enter links manually.",console.error(e)}finally{this.searchingPlatforms=!1}},async forceYouTubeSearch(){this.searchingYouTube=!0;try{const n=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId,force_youtube:!0});n.data.success&&(this.platformResults.youtube=n.data.results.youtube||[],this.platformWarnings&&(this.platformWarnings.youtube=null),this.platformResults.youtube.length>0&&(this.selectedYouTube=this.platformResults.youtube[0].url,this.onYouTubeSelected()))}catch(n){console.error("YouTube search failed:",n)}finally{this.searchingYouTube=!1}},onYouTubeSelected(){this.manualYouTube=this.selectedYouTube||"",this.updateLinks()},onSpotifySelected(){this.manualSpotify=this.selectedSpotify||"",this.updateLinks()},onAppleSelected(){this.manualApple=this.selectedApple||"",this.updateLinks()},onManualYouTubeInput(){this.selectedYouTube=this.manualYouTube,this.updateLinks()},onManualSpotifyInput(){this.selectedSpotify=this.manualSpotify,this.updateLinks()},onManualAppleInput(){this.selectedApple=this.manualApple,this.updateLinks()},updateLinks(){this.update({...this.value,spotify_link:this.selectedSpotify||null,apple_podcasts_link:this.selectedApple||null,youtube_link:this.selectedYouTube||null})},formatDate(n){return n?new Date(n).toLocaleDateString():""}}},M={class:"podcast-link-finder"},R={class:"mb-6"},A={class:"flex gap-2 mb-2"},_={class:"select-wrapper"},L={class:"select-wrapper"},E={key:0,class:"flex items-center py-2 text-gray-600 dark:text-dark-150"},Y=["value"],I={class:"flex items-center justify-between"},D={class:"font-medium text-gray-900 dark:text-dark-100"},z={key:2,class:"space-y-6"},P={class:"card p-0 overflow-hidden"},V={key:0,class:"p-4"},B=["value"],H={key:0,class:"mt-2 flex items-center gap-2 text-sm text-gray-700 dark:text-dark-150"},U=["href"],F={key:1,class:"p-4"},N={key:0,class:"text-sm text-amber-700 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded p-3"},O={class:"flex items-center justify-between gap-4"},W={class:"flex items-start gap-2"},j={key:1,class:"text-xs"},Q={key:1,class:"text-gray-500 dark:text-dark-150 text-sm"},K={class:"card p-0 overflow-hidden"},q={key:0,class:"p-4"},G=["value"],J={key:0,class:"mt-2 flex items-center gap-2 text-sm text-gray-700 dark:text-dark-150"},X=["href"],Z={key:1,class:"p-4 text-gray-500 dark:text-dark-150 text-sm"},$={class:"card p-0 overflow-hidden"},ee={key:0,class:"p-4"},te=["value"],se={key:0,class:"mt-2 flex items-center gap-2 text-sm text-gray-700 dark:text-dark-150"},le=["href"],oe={key:1,class:"p-4 text-gray-500 dark:text-dark-150 text-sm"},re={key:3,class:"mt-6 pt-6 border-t border-gray-200 dark:border-dark-900"},ie={class:"mt-4 space-y-6"},ne={class:"flex items-start"},ae={class:"text-sm"};function de(n,e,h,k,l,o){return i(),r("div",M,[t("div",R,[e[28]||(e[28]=t("label",{class:"publish-field-label"},"Select Episode from Transistor",-1)),t("div",A,[p(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>l.searchQuery=s),onInput:e[1]||(e[1]=(...s)=>o.debouncedSearch&&o.debouncedSearch(...s)),placeholder:"Search episodes...",class:"input-text flex-1"},null,544),[[b,l.searchQuery]]),t("div",_,[p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.episodeStatus=s),onChange:e[3]||(e[3]=s=>o.loadEpisodes(l.searchQuery)),class:"input-text"},[...e[22]||(e[22]=[t("option",{value:"published"},"Published",-1),t("option",{value:"scheduled"},"Scheduled",-1),t("option",{value:"draft"},"Draft",-1),t("option",{value:"all"},"All Episodes",-1)])],544),[[c,l.episodeStatus]]),e[23]||(e[23]=t("div",{class:"select-chevron"},[t("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),t("div",L,[p(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.episodeLimit=s),onChange:e[5]||(e[5]=s=>o.loadEpisodes(l.searchQuery)),class:"input-text"},[...e[24]||(e[24]=[t("option",{value:20},"20",-1),t("option",{value:50},"50",-1),t("option",{value:100},"100",-1)])],544),[[c,l.episodeLimit]]),e[25]||(e[25]=t("div",{class:"select-chevron"},[t("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),l.loading?(i(),r("div",E,[...e[26]||(e[26]=[t("svg",{class:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("span",{class:"text-sm"},"Loading episodes...",-1)])])):p((i(),r("select",{key:1,"onUpdate:modelValue":e[6]||(e[6]=s=>l.selectedEpisodeId=s),onChange:e[7]||(e[7]=(...s)=>o.onEpisodeSelected&&o.onEpisodeSelected(...s)),class:"input-text"},[e[27]||(e[27]=t("option",{value:null},"-- Select an episode --",-1)),(i(!0),r(y,null,v(l.episodes,s=>(i(),r("option",{key:s.id,value:s.id},a(s.title)+" ("+a(o.formatDate(s.published_at))+") ",9,Y))),128))],544)),[[c,l.selectedEpisodeId]])]),n.value.episode_title?(i(),r("div",{key:0,class:"card mb-6",style:u(o.selectedEpisodeStyle)},[t("div",I,[t("div",null,[e[29]||(e[29]=t("div",{class:"text-xs uppercase tracking-wide text-gray-600 dark:text-dark-150 mb-1"},"Selected Episode",-1)),t("div",D,a(n.value.episode_title),1)]),!l.searchingPlatforms&&!l.platformResults?(i(),r("button",{key:0,onClick:e[8]||(e[8]=(...s)=>o.searchAllPlatforms&&o.searchAllPlatforms(...s)),type:"button",class:"btn-primary"}," Search Platforms ")):d("",!0)])],4)):d("",!0),l.searchingPlatforms?(i(),r("div",{key:1,class:"card mb-6",style:u(o.searchingStyle)},[...e[30]||(e[30]=[C('<div class="flex items-center" data-v-816033f6><svg class="animate-spin h-4 w-4 mr-3 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-816033f6><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-816033f6></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-816033f6></path></svg><span class="text-sm" data-v-816033f6>Searching across platforms...</span></div>',1)])],4)):d("",!0),l.platformResults?(i(),r("div",z,[e[44]||(e[44]=t("div",{class:"text-xs uppercase tracking-wide text-gray-600 dark:text-dark-150 mb-2"},"Platform Links",-1)),t("div",P,[t("div",{class:"flex items-center gap-2 px-4 py-3 border-b",style:u(o.youtubeHeaderStyle)},[e[31]||(e[31]=t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})],-1)),e[32]||(e[32]=t("span",{class:"font-semibold"},"YouTube",-1)),l.platformResults.youtube.length>0?(i(),r("span",{key:0,class:"ml-auto text-xs px-2 py-1 rounded",style:u(o.resultCountStyle)},a(l.platformResults.youtube.length)+" found ",5)):d("",!0)],4),l.platformResults.youtube.length>0?(i(),r("div",V,[p(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>l.selectedYouTube=s),onChange:e[10]||(e[10]=(...s)=>o.onYouTubeSelected&&o.onYouTubeSelected(...s)),class:"input-text"},[e[33]||(e[33]=t("option",{value:null},"-- Select a video --",-1)),(i(!0),r(y,null,v(l.platformResults.youtube,(s,f)=>(i(),r("option",{key:f,value:s.url},a(s.title)+" ("+a(s.score)+"% match) ",9,B))),128))],544),[[c,l.selectedYouTube]]),l.selectedYouTube?(i(),r("div",H,[e[34]||(e[34]=t("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),t("a",{href:l.selectedYouTube,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 dark:text-blue-400 hover:underline truncate"},a(l.selectedYouTube),9,U)])):d("",!0)])):(i(),r("div",F,[l.platformWarnings&&l.platformWarnings.youtube?(i(),r("div",N,[t("div",O,[t("div",W,[e[35]||(e[35]=t("svg",{class:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),t("span",null,a(l.platformWarnings.youtube),1)]),l.searchingYouTube?(i(),r("span",j,"Searching...")):(i(),r("button",{key:0,onClick:e[11]||(e[11]=(...s)=>o.forceYouTubeSearch&&o.forceYouTubeSearch(...s)),type:"button",class:"btn-primary text-xs px-2 py-1 flex-shrink-0"}," Search Anyway "))])])):(i(),r("div",Q," No matches found "))]))]),t("div",K,[t("div",{class:"flex items-center gap-2 px-4 py-3 border-b",style:u(o.spotifyHeaderStyle)},[e[36]||(e[36]=t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})],-1)),e[37]||(e[37]=t("span",{class:"font-semibold"},"Spotify",-1)),l.platformResults.spotify.length>0?(i(),r("span",{key:0,class:"ml-auto text-xs px-2 py-1 rounded",style:u(o.resultCountStyle)},a(l.platformResults.spotify.length)+" found ",5)):d("",!0)],4),l.platformResults.spotify.length>0?(i(),r("div",q,[p(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>l.selectedSpotify=s),onChange:e[13]||(e[13]=(...s)=>o.onSpotifySelected&&o.onSpotifySelected(...s)),class:"input-text"},[e[38]||(e[38]=t("option",{value:null},"-- Select an episode --",-1)),(i(!0),r(y,null,v(l.platformResults.spotify,(s,f)=>(i(),r("option",{key:f,value:s.url},a(s.title)+" ("+a(s.score)+"% match) ",9,G))),128))],544),[[c,l.selectedSpotify]]),l.selectedSpotify?(i(),r("div",J,[e[39]||(e[39]=t("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),t("a",{href:l.selectedSpotify,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 dark:text-blue-400 hover:underline truncate"},a(l.selectedSpotify),9,X)])):d("",!0)])):(i(),r("div",Z," No matches found "))]),t("div",$,[t("div",{class:"flex items-center gap-2 px-4 py-3 border-b",style:u(o.appleHeaderStyle)},[e[40]||(e[40]=t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})],-1)),e[41]||(e[41]=t("span",{class:"font-semibold"},"Apple Podcasts",-1)),l.platformResults.apple_podcasts.length>0?(i(),r("span",{key:0,class:"ml-auto text-xs px-2 py-1 rounded",style:u(o.resultCountStyle)},a(l.platformResults.apple_podcasts.length)+" found ",5)):d("",!0)],4),l.platformResults.apple_podcasts.length>0?(i(),r("div",ee,[p(t("select",{"onUpdate:modelValue":e[14]||(e[14]=s=>l.selectedApple=s),onChange:e[15]||(e[15]=(...s)=>o.onAppleSelected&&o.onAppleSelected(...s)),class:"input-text"},[e[42]||(e[42]=t("option",{value:null},"-- Select an episode --",-1)),(i(!0),r(y,null,v(l.platformResults.apple_podcasts,(s,f)=>(i(),r("option",{key:f,value:s.url},a(s.title)+" ("+a(s.score)+"% match) ",9,te))),128))],544),[[c,l.selectedApple]]),l.selectedApple?(i(),r("div",se,[e[43]||(e[43]=t("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),t("a",{href:l.selectedApple,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 dark:text-blue-400 hover:underline truncate"},a(l.selectedApple),9,le)])):d("",!0)])):(i(),r("div",oe," No matches found "))])])):d("",!0),n.config.allow_manual_override&&n.value.episode_id?(i(),r("div",re,[t("details",null,[e[48]||(e[48]=t("summary",{class:"cursor-pointer text-sm text-gray-600 dark:text-dark-150 hover:text-gray-800 dark:hover:text-dark-100 select-none"}," Enter links manually ",-1)),t("div",ie,[t("div",null,[e[45]||(e[45]=t("label",{class:"publish-field-label text-sm"},"YouTube URL",-1)),p(t("input",{type:"url","onUpdate:modelValue":e[16]||(e[16]=s=>l.manualYouTube=s),onInput:e[17]||(e[17]=(...s)=>o.onManualYouTubeInput&&o.onManualYouTubeInput(...s)),placeholder:"https://www.youtube.com/watch?v=...",class:"input-text"},null,544),[[b,l.manualYouTube]])]),t("div",null,[e[46]||(e[46]=t("label",{class:"publish-field-label text-sm"},"Spotify URL",-1)),p(t("input",{type:"url","onUpdate:modelValue":e[18]||(e[18]=s=>l.manualSpotify=s),onInput:e[19]||(e[19]=(...s)=>o.onManualSpotifyInput&&o.onManualSpotifyInput(...s)),placeholder:"https://open.spotify.com/episode/...",class:"input-text"},null,544),[[b,l.manualSpotify]])]),t("div",null,[e[47]||(e[47]=t("label",{class:"publish-field-label text-sm"},"Apple Podcasts URL",-1)),p(t("input",{type:"url","onUpdate:modelValue":e[20]||(e[20]=s=>l.manualApple=s),onInput:e[21]||(e[21]=(...s)=>o.onManualAppleInput&&o.onManualAppleInput(...s)),placeholder:"https://podcasts.apple.com/...",class:"input-text"},null,544),[[b,l.manualApple]])])])])])):d("",!0),l.error?(i(),r("div",{key:4,class:"card mb-6",style:u(o.errorStyle)},[t("div",ne,[e[49]||(e[49]=t("svg",{class:"w-5 h-5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),t("span",ae,a(l.error),1)])],4)):d("",!0)])}const ue=x(T,[["render",de],["__scopeId","data-v-816033f6"]]),pe={mixins:[g],data(){return{fetching:!1,error:null}},computed:{isDarkMode(){return document.documentElement.classList.contains("dark")},cardStyle(){return this.isDarkMode?{backgroundColor:"rgba(30, 58, 138, 0.2)",borderColor:"#1e3a8a"}:{backgroundColor:"#eff6ff",borderColor:"#bfdbfe"}},successCardStyle(){return this.isDarkMode?{backgroundColor:"rgba(20, 83, 45, 0.2)",borderColor:"#14532d"}:{backgroundColor:"#f0fdf4",borderColor:"#bbf7d0"}},errorStyle(){return this.isDarkMode?{backgroundColor:"rgba(127, 29, 29, 0.3)",color:"#fca5a5"}:{backgroundColor:"#fee2e2",color:"#b91c1c"}}},methods:{async fetchLivestream(){if(!this.meta.entryId){this.error="Please save the entry first before fetching the livestream.";return}this.fetching=!0,this.error=null;try{const n=await this.$axios.post(`/cp/podcast-link-finder/youtube-livestream/${this.meta.entryId}`);n.data.success?this.update(n.data.url):this.error=n.data.message||"Failed to fetch livestream"}catch(n){console.error("Livestream fetch error:",n),n.response&&n.response.data&&n.response.data.message?this.error=n.response.data.message:this.error="Failed to fetch livestream. Please try again."}finally{this.fetching=!1}},clearUrl(){this.update(null),this.error=null}}},ce={class:"youtube-livestream-fieldtype"},fe={key:0,class:"text-sm text-gray-500 dark:text-dark-150"},me={class:"flex items-center justify-between gap-4"},he={class:"flex-1"},ye={class:"flex items-start gap-2"},ve={class:"flex items-center gap-3"},be={class:"flex-1 min-w-0"},ke=["href"],ge={key:3,class:"text-sm text-gray-500 dark:text-dark-150"},xe={key:0},Se={key:1};function Ce(n,e,h,k,l,o){return i(),r("div",ce,[n.meta.enabled?!n.value&&n.meta.showButton?(i(),r("div",{key:1,class:"card",style:u(o.cardStyle)},[t("div",me,[t("div",he,[t("div",{class:m(["text-sm font-medium",o.isDarkMode?"text-blue-300":"text-blue-800"])}," Fetch YouTube Livestream ",2),t("div",{class:m(["text-xs mt-0.5",o.isDarkMode?"text-blue-400":"text-blue-600"])}," Auto-fetch the scheduled livestream for this message's air date ",2)]),l.fetching?(i(),r("span",{key:1,class:m(["flex items-center text-xs",o.isDarkMode?"text-blue-300":"text-blue-600"])},[...e[2]||(e[2]=[t("svg",{class:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),w(" Fetching... ",-1)])],2)):(i(),r("button",{key:0,onClick:e[0]||(e[0]=(...s)=>o.fetchLivestream&&o.fetchLivestream(...s)),type:"button",class:"btn-primary text-xs px-3 py-1.5 flex-shrink-0"}," Fetch Livestream "))]),l.error?(i(),r("div",{key:0,class:"mt-3 text-sm p-3 rounded",style:u(o.errorStyle)},[t("div",ye,[e[3]||(e[3]=t("svg",{class:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),t("span",null,a(l.error),1)])],4)):d("",!0)],4)):n.value?(i(),r("div",{key:2,class:"card",style:u(o.successCardStyle)},[t("div",ve,[(i(),r("svg",{class:m(["w-5 h-5 flex-shrink-0",o.isDarkMode?"text-green-400":"text-green-600"]),fill:"currentColor",viewBox:"0 0 20 20"},[...e[4]||(e[4]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])],2)),t("div",be,[t("div",{class:m(["text-sm font-medium",o.isDarkMode?"text-green-300":"text-green-800"])}," YouTube Livestream ",2),t("a",{href:n.value,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate block"},a(n.value),9,ke)]),t("button",{onClick:e[1]||(e[1]=(...s)=>o.clearUrl&&o.clearUrl(...s)),type:"button",class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1",title:"Clear URL"},[...e[5]||(e[5]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])],4)):(i(),r("div",ge,[n.meta.airDate?(i(),r("span",Se,"Air date is in the past")):(i(),r("span",xe,"Set an air date to enable livestream fetch"))])):(i(),r("div",fe," YouTube Livestream fetch is disabled "))])}const we=x(pe,[["render",Ce],["__scopeId","data-v-3ed24c5b"]]);Statamic.$components.register("podcast_link_finder-fieldtype",ue);Statamic.$components.register("you_tube_livestream-fieldtype",we);

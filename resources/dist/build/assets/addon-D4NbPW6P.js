const{Fieldtype:T,IndexFieldtype:Fe,FieldtypeMixin:ze,HasActionsMixin:Be,HasInputOptionsMixin:Ye,HasPreferencesMixin:De,IndexFieldtypeMixin:Ue,InlineEditForm:He,DateFormatter:Oe,ItemActions:We,RelatedItem:Ne,RestoreRevision:Ke,RevisionHistory:je,RevisionPreview:Ge,SaveButtonOptions:Qe,SortableList:qe,requireElevatedSession:Je,requireElevatedSessionIf:Xe,clone:Ze,deepClone:$e,resetValuesFromResponse:et}=__STATAMIC__.core,{Alert:P,AuthCard:tt,Avatar:st,Badge:L,Button:w,ButtonGroup:lt,Calendar:ot,Card:R,CardList:it,CardListItem:at,CardPanel:nt,CharacterCounter:rt,Checkbox:ut,CheckboxGroup:dt,CodeEditor:pt,Combobox:ct,CommandPaletteItem:ht,ConfirmationModal:ft,Context:mt,ContextFooter:yt,ContextHeader:gt,ContextItem:bt,ContextLabel:kt,ContextMenu:vt,ContextSeparator:xt,CreateForm:_t,DatePicker:St,DateRangePicker:Ct,Description:Tt,DocsCallout:Pt,DragHandle:wt,Dropdown:Rt,DropdownItem:At,DropdownLabel:Lt,DropdownMenu:It,DropdownSeparator:Vt,DropdownFooter:Et,DropdownHeader:Mt,Editable:Ft,ErrorMessage:zt,EmptyStateItem:Bt,EmptyStateMenu:Yt,Field:Dt,Header:Ut,Heading:Ht,HoverCard:Ot,Icon:I,Input:V,InputGroup:Wt,InputGroupAppend:Nt,InputGroupPrepend:Kt,Label:jt,Listing:Gt,ListingCustomizeColumns:Qt,ListingFilters:qt,ListingHeaderCell:Jt,ListingPagination:Xt,ListingPresets:Zt,ListingPresetTrigger:$t,ListingRowActions:es,ListingSearch:ts,ListingTable:ss,ListingTableBody:ls,ListingTableHead:os,ListingToggleAll:is,LivePreview:as,LivePreviewPopout:ns,Modal:rs,ModalClose:us,ModalTitle:ds,Pagination:ps,Panel:cs,PanelFooter:hs,PanelHeader:fs,Popover:ms,PublishComponents:ys,PublishContainer:gs,publishContextKey:bs,injectPublishContext:ks,PublishField:vs,PublishFields:xs,PublishFieldsProvider:_s,PublishForm:Ss,PublishLocalizations:Cs,PublishSections:Ts,PublishTabs:Ps,Radio:ws,RadioGroup:Rs,Select:E,Separator:As,Slider:Ls,Skeleton:Is,SplitterGroup:Vs,SplitterPanel:Es,SplitterResizeHandle:Ms,StatusIndicator:Fs,Subheading:zs,Switch:Bs,TabContent:Ys,Stack:Ds,StackClose:Us,StackHeader:Hs,StackFooter:Os,StackContent:Ws,Table:Ns,TableCell:Ks,TableColumn:js,TableColumns:Gs,TableRow:Qs,TableRows:qs,TabList:Js,TabProvider:Xs,Tabs:Zs,TabTrigger:$s,Textarea:el,TimePicker:tl,ToggleGroup:sl,ToggleItem:ll,Widget:ol,registerIconSet:il,registerIconSetFromStrings:al}=__STATAMIC__.ui,M=window.Vue,{BaseTransition:nl,BaseTransitionPropsValidators:rl,Comment:ul,DeprecationTypes:dl,EffectScope:pl,ErrorCodes:cl,ErrorTypeStrings:hl,Fragment:fl,KeepAlive:ml,ReactiveEffect:yl,Static:gl,Suspense:bl,Teleport:kl,Text:vl,TrackOpTypes:xl,Transition:_l,TransitionGroup:Sl,TriggerOpTypes:Cl,VueElement:Tl,__esModule:Pl,assertNumber:wl,callWithAsyncErrorHandling:Rl,callWithErrorHandling:Al,camelize:Ll,capitalize:Il,cloneVNode:Vl,compatUtils:El,compile:Ml,computed:Fl,createApp:zl,createBlock:b,createCommentVNode:d,createElementBlock:u,createElementVNode:l,createHydrationRenderer:Bl,createPropsRestProxy:Yl,createRenderer:Dl,createSSRApp:Ul,createSlots:Hl,createStaticVNode:Ol,createTextVNode:S,createVNode:r,customRef:Wl,defineAsyncComponent:Nl,defineComponent:Kl,defineCustomElement:jl,defineEmits:Gl,defineExpose:Ql,defineModel:ql,defineOptions:Jl,defineProps:Xl,defineSSRCustomElement:Zl,defineSlots:$l,devtools:eo,effect:to,effectScope:so,getCurrentInstance:lo,getCurrentScope:oo,getCurrentWatcher:io,getTransitionRawChildren:ao,guardReactiveProps:no,h:ro,handleError:uo,hasInjectionContext:po,hydrate:co,hydrateOnIdle:ho,hydrateOnInteraction:fo,hydrateOnMediaQuery:mo,hydrateOnVisible:yo,initCustomFormatter:go,initDirectivesForSSR:bo,inject:ko,isMemoSame:vo,isProxy:xo,isReactive:_o,isReadonly:So,isRef:Co,isRuntimeOnly:To,isShallow:Po,isVNode:wo,markRaw:Ro,mergeDefaults:Ao,mergeModels:Lo,mergeProps:Io,nextTick:Vo,nodeOps:Eo,normalizeClass:c,normalizeProps:Mo,normalizeStyle:Fo,onActivated:zo,onBeforeMount:Bo,onBeforeUnmount:Yo,onBeforeUpdate:Do,onDeactivated:Uo,onErrorCaptured:Ho,onMounted:Oo,onRenderTracked:Wo,onRenderTriggered:No,onScopeDispose:Ko,onServerPrefetch:jo,onUnmounted:Go,onUpdated:Qo,onWatcherCleanup:qo,openBlock:n,patchProp:Jo,popScopeId:Xo,provide:Zo,proxyRefs:$o,pushScopeId:ei,queuePostFlushCb:ti,reactive:si,readonly:li,ref:oi,registerRuntimeCompiler:ii,render:ai,renderList:ni,renderSlot:ri,resolveComponent:m,resolveDirective:ui,resolveDynamicComponent:di,resolveFilter:pi,resolveTransitionHooks:ci,setBlockTracking:hi,setDevtoolsHook:fi,setTransitionHooks:mi,shallowReactive:yi,shallowReadonly:gi,shallowRef:bi,ssrContextKey:ki,ssrUtils:vi,stop:xi,toDisplayString:h,toHandlerKey:_i,toHandlers:Si,toRaw:Ci,toRef:Ti,toRefs:Pi,toValue:wi,transformVNodeArgs:Ri,triggerRef:Ai,unref:Li,useAttrs:Ii,useCssModule:Vi,useCssVars:Ei,useHost:Mi,useId:Fi,useModel:zi,useSSRContext:Bi,useShadowRoot:Yi,useSlots:Di,useTemplateRef:Ui,useTransitionState:Hi,vModelCheckbox:Oi,vModelDynamic:Wi,vModelRadio:Ni,vModelSelect:Ki,vModelText:ji,vShow:Gi,version:Qi,warn:qi,watch:Ji,watchEffect:Xi,watchPostEffect:Zi,watchSyncEffect:$i,withAsyncContext:ea,withCtx:g,withDefaults:ta,withDirectives:sa,withKeys:la,withMemo:oa,withModifiers:_,withScopeId:ia}=M,A=(e,t)=>{const i=e.__vccOpts||e;for(const[p,s]of t)i[p]=s;return i},F={mixins:[T],components:{Alert:P,Badge:L,Button:w,Card:R,Input:V,Select:E},data(){return{episodes:[],searchQuery:"",episodeStatus:"published",episodeLimit:20,selectedEpisodeId:null,loading:!1,searchingPlatforms:!1,searchingYouTube:!1,searchingSpotify:!1,searchingApple:!1,error:null,searchTimeout:null,platformResults:null,platformWarnings:null,selectedYouTube:null,selectedSpotify:null,selectedApple:null,manualYouTube:"",manualSpotify:"",manualApple:"",expandedPlatform:null,initializing:!0}},computed:{statusOptions(){return[{value:"published",label:"Published"},{value:"scheduled",label:"Scheduled"},{value:"draft",label:"Draft"},{value:"all",label:"All Episodes"}]},limitOptions(){return[{value:20,label:"20"},{value:50,label:"50"},{value:100,label:"100"}]},episodeOptions(){return this.episodes.map(e=>({value:e.id,label:`${e.title} (${this.formatDate(e.published_at)})`}))},youtubeOptions(){return(this.platformResults?.youtube||[]).map(e=>({value:e.url,label:`${e.title} (${e.score}% match)`}))},spotifyOptions(){return(this.platformResults?.spotify||[]).map(e=>({value:e.url,label:`${e.title} (${e.score}% match)`}))},appleOptions(){return(this.platformResults?.apple_podcasts||[]).map(e=>({value:e.url,label:`${e.title} (${e.score}% match)`}))},linkedCount(){let e=0;return this.value.youtube_link&&e++,this.value.spotify_link&&e++,this.value.apple_podcasts_link&&e++,e},hasUnlinkedPlatforms(){return!this.value.youtube_link||!this.value.spotify_link||!this.value.apple_podcasts_link}},mounted(){this.loadEpisodes(),this.value&&this.value.episode_id&&(this.selectedEpisodeId=this.value.episode_id,this.manualYouTube=this.value.youtube_link||"",this.manualSpotify=this.value.spotify_link||"",this.manualApple=this.value.apple_podcasts_link||""),this.$nextTick(()=>{this.initializing=!1})},methods:{async loadEpisodes(e=""){this.loading=!0,this.error=null;try{const t=await this.$axios.get("/cp/podcast-link-finder/search-episodes",{params:{query:e,status:this.episodeStatus,limit:this.episodeLimit}});this.episodes=t.data.episodes||[]}catch(t){this.error="Failed to load episodes. Please check your API credentials.",console.error(t)}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadEpisodes(this.searchQuery)},500)},async onEpisodeSelected(){if(!this.selectedEpisodeId){this.$emit("update:value",{episode_id:null,episode_title:null,spotify_link:null,apple_podcasts_link:null,youtube_link:null}),this.platformResults=null,this.platformWarnings=null,this.selectedYouTube=null,this.selectedSpotify=null,this.selectedApple=null,this.manualYouTube="",this.manualSpotify="",this.manualApple="",this.expandedPlatform=null;return}const e=this.episodes.find(t=>t.id===this.selectedEpisodeId);this.$emit("update:value",{episode_id:e.id,episode_title:e.title,spotify_link:null,apple_podcasts_link:null,youtube_link:null}),this.platformResults=null,this.platformWarnings=null,this.selectedYouTube=null,this.selectedSpotify=null,this.selectedApple=null,this.manualYouTube="",this.manualSpotify="",this.manualApple="",this.config.auto_find!==!1&&await this.searchAllPlatforms()},async searchAllPlatforms(e=!1){this.searchingPlatforms=!0,this.searchingYouTube=!0,this.searchingSpotify=!0,this.searchingApple=!0,this.error=null;try{const t=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId,force_youtube:e});if(t.data.success&&(this.platformResults=t.data.results,this.platformWarnings=t.data.warnings||null,this.config.auto_find!==!1)){if(this.platformResults.youtube?.length>0){const i=this.platformResults.youtube[0].url;this.selectedYouTube=i,this.manualYouTube=i,this.updateLink("youtube",i)}if(this.platformResults.spotify?.length>0){const i=this.platformResults.spotify[0].url;this.selectedSpotify=i,this.manualSpotify=i,this.updateLink("spotify",i)}if(this.platformResults.apple_podcasts?.length>0){const i=this.platformResults.apple_podcasts[0].url;this.selectedApple=i,this.manualApple=i,this.updateLink("apple",i)}}}catch(t){this.error="Failed to search platforms. You can enter links manually.",console.error(t)}finally{this.searchingPlatforms=!1,this.searchingYouTube=!1,this.searchingSpotify=!1,this.searchingApple=!1}},async searchMissingPlatforms(){this.searchingPlatforms=!0,this.error=null;const e=[];this.value.youtube_link||e.push("youtube"),this.value.spotify_link||e.push("spotify"),this.value.apple_podcasts_link||e.push("apple");try{const t=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId||this.value.episode_id,force_youtube:!1});if(t.data.success){if(this.platformResults=t.data.results,this.platformWarnings=t.data.warnings||null,e.includes("youtube")&&this.platformResults.youtube?.length>0){const i=this.platformResults.youtube[0].url;this.selectedYouTube=i,this.manualYouTube=i,this.updateLink("youtube",i)}if(e.includes("spotify")&&this.platformResults.spotify?.length>0){const i=this.platformResults.spotify[0].url;this.selectedSpotify=i,this.manualSpotify=i,this.updateLink("spotify",i)}if(e.includes("apple")&&this.platformResults.apple_podcasts?.length>0){const i=this.platformResults.apple_podcasts[0].url;this.selectedApple=i,this.manualApple=i,this.updateLink("apple",i)}}}catch(t){this.error="Failed to search platforms. You can enter links manually.",console.error(t)}finally{this.searchingPlatforms=!1}},async searchPlatform(e,t=!1){const i=e==="apple"?"searchingApple":`searching${e.charAt(0).toUpperCase()+e.slice(1)}`;this[i]=!0;try{const p=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId||this.value.episode_id,force_youtube:e==="youtube"&&t});if(p.data.success){this.platformResults||(this.platformResults={youtube:[],spotify:[],apple_podcasts:[]});const s=e==="apple"?"apple_podcasts":e;this.platformResults[s]=p.data.results[s]||[],p.data.warnings&&(this.platformWarnings={...this.platformWarnings,...p.data.warnings},e==="youtube"&&t&&(this.platformWarnings.youtube=null))}}catch(p){console.error(`Failed to search ${e}:`,p)}finally{this[i]=!1}},onPlatformSelected(e,t){e==="youtube"?this.manualYouTube=t||"":e==="spotify"?this.manualSpotify=t||"":e==="apple"&&(this.manualApple=t||""),this.updateLink(e,t)},onManualInput(e,t){e==="youtube"?this.selectedYouTube=t:e==="spotify"?this.selectedSpotify=t:e==="apple"&&(this.selectedApple=t),this.updateLink(e,t)},updateLink(e,t){const i=e==="youtube"?"youtube_link":e==="spotify"?"spotify_link":"apple_podcasts_link";this.$emit("update:value",{...this.value,[i]:t||null})},clearLink(e){e==="youtube"?(this.selectedYouTube=null,this.manualYouTube=""):e==="spotify"?(this.selectedSpotify=null,this.manualSpotify=""):e==="apple"&&(this.selectedApple=null,this.manualApple=""),this.updateLink(e,null)},getStatusText(e){if(e==="youtube"?this.searchingYouTube:e==="spotify"?this.searchingSpotify:this.searchingApple)return"Searching...";if(e==="youtube"?this.value.youtube_link:e==="spotify"?this.value.spotify_link:this.value.apple_podcasts_link)return"Linked";const p=e==="apple"?"apple_podcasts":e,s=this.platformResults?.[p]?.length>0;return s?"Match found":this.platformResults&&!s?"No match":"Not linked"},getStatusBadgeColor(e){if(e==="youtube"?this.searchingYouTube:e==="spotify"?this.searchingSpotify:this.searchingApple)return"blue";if(e==="youtube"?this.value.youtube_link:e==="spotify"?this.value.spotify_link:this.value.apple_podcasts_link)return"green";const p=e==="apple"?"apple_podcasts":e,s=this.platformResults?.[p]?.length>0;return s?"amber":this.platformResults&&!s?"orange":"default"},formatDate(e){return e?new Date(e).toLocaleDateString():""}}},z={class:"podcast-link-finder"},B={class:"mb-6"},Y={class:"flex gap-2 mb-2"},D={class:"flex-1 min-w-0"},U={class:"shrink-0"},H={class:"shrink-0"},O={key:0,class:"flex items-center py-2 text-gray-600 dark:text-gray-400"},W={key:0,class:"mb-6"},N={class:"flex items-center justify-between gap-4"},K={class:"min-w-0"},j={class:"font-medium text-gray-900 dark:text-gray-100 truncate"},G={class:"flex items-center gap-3 shrink-0"},Q={class:"flex items-center gap-1.5 text-sm"},q={class:"text-gray-500 dark:text-gray-400 ml-1"},J={key:1,class:"space-y-3"},X={key:0,class:"p-4 border-t border-gray-200 dark:border-dark-400"},Z={key:0,class:"flex items-center gap-2 mb-3"},$=["href"],ee={class:"flex items-center justify-between gap-3"},te={class:"text-sm"},se={key:2,class:"mb-3"},le={class:"text-xs text-gray-500 dark:text-gray-400 mb-1 block"},oe={class:"flex gap-2"},ie={class:"flex-1"},ae={key:0,class:"p-4 border-t border-gray-200 dark:border-dark-400"},ne={key:0,class:"flex items-center gap-2 mb-3"},re=["href"],ue={key:1,class:"mb-3"},de={class:"text-xs text-gray-500 dark:text-gray-400 mb-1 block"},pe={class:"flex gap-2"},ce={class:"flex-1"},he={key:0,class:"p-4 border-t border-gray-200 dark:border-dark-400"},fe={key:0,class:"flex items-center gap-2 mb-3"},me=["href"],ye={key:1,class:"mb-3"},ge={class:"text-xs text-gray-500 dark:text-gray-400 mb-1 block"},be={class:"flex gap-2"},ke={class:"flex-1"};function ve(e,t,i,p,s,a){const k=m("Input"),y=m("Select"),f=m("Button"),v=m("Card"),x=m("Badge"),C=m("Alert");return n(),u("div",z,[l("div",B,[t[29]||(t[29]=l("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-2 block"}," Select Episode from Transistor ",-1)),l("div",Y,[l("div",D,[r(k,{modelValue:s.searchQuery,"onUpdate:modelValue":[t[0]||(t[0]=o=>s.searchQuery=o),a.debouncedSearch],placeholder:"Search episodes..."},null,8,["modelValue","onUpdate:modelValue"])]),l("div",U,[r(y,{modelValue:s.episodeStatus,"onUpdate:modelValue":[t[1]||(t[1]=o=>s.episodeStatus=o),t[2]||(t[2]=o=>a.loadEpisodes(s.searchQuery))],options:a.statusOptions},null,8,["modelValue","options"])]),l("div",H,[r(y,{modelValue:s.episodeLimit,"onUpdate:modelValue":[t[3]||(t[3]=o=>s.episodeLimit=o),t[4]||(t[4]=o=>a.loadEpisodes(s.searchQuery))],options:a.limitOptions},null,8,["modelValue","options"])])]),s.loading?(n(),u("div",O,[...t[28]||(t[28]=[l("svg",{class:"animate-spin size-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),l("span",{class:"text-sm"},"Loading episodes...",-1)])])):(n(),b(y,{key:1,modelValue:s.selectedEpisodeId,"onUpdate:modelValue":[t[5]||(t[5]=o=>s.selectedEpisodeId=o),a.onEpisodeSelected],options:a.episodeOptions,placeholder:"Select an episode..."},null,8,["modelValue","onUpdate:modelValue","options"]))]),e.value.episode_title?(n(),u("div",W,[r(v,{class:"p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"},{default:g(()=>[l("div",N,[l("div",K,[t[30]||(t[30]=l("div",{class:"text-xs uppercase tracking-wide text-blue-600 dark:text-blue-400 mb-1"}," Selected Episode ",-1)),l("div",j,h(e.value.episode_title),1)]),l("div",G,[l("div",Q,[l("span",{class:c(["size-2.5 rounded-full",e.value.youtube_link?"bg-green-500":"bg-gray-300 dark:bg-gray-600"])},null,2),l("span",{class:c(["size-2.5 rounded-full",e.value.spotify_link?"bg-green-500":"bg-gray-300 dark:bg-gray-600"])},null,2),l("span",{class:c(["size-2.5 rounded-full",e.value.apple_podcasts_link?"bg-green-500":"bg-gray-300 dark:bg-gray-600"])},null,2),l("span",q,h(a.linkedCount)+"/3 ",1)]),a.hasUnlinkedPlatforms?(n(),b(f,{key:0,onClick:a.searchMissingPlatforms,loading:s.searchingPlatforms,variant:"primary",size:"sm",text:"Search Missing"},null,8,["onClick","loading"])):d("",!0)])])]),_:1})])):d("",!0),e.value.episode_id?(n(),u("div",J,[r(v,{inset:!0,class:"p-0 overflow-hidden"},{default:g(()=>[l("div",{class:"flex items-center gap-3 px-4 py-3 cursor-pointer select-none border-b bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700",onClick:t[6]||(t[6]=o=>s.expandedPlatform=s.expandedPlatform==="youtube"?null:"youtube")},[(n(),u("svg",{class:c(["w-5 h-5 shrink-0",e.value.youtube_link?"text-red-600":"text-gray-400 dark:text-gray-500"]),viewBox:"0 0 24 24",fill:"currentColor"},[...t[31]||(t[31]=[l("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"},null,-1)])],2)),l("span",{class:c(["font-semibold",e.value.youtube_link?"text-red-600 dark:text-red-500":"text-gray-700 dark:text-gray-300"])},"YouTube",2),r(x,{class:"ml-auto",text:a.getStatusText("youtube"),color:a.getStatusBadgeColor("youtube"),size:"sm",pill:""},null,8,["text","color"]),(n(),u("svg",{class:c(["w-4 h-4 transition-transform shrink-0",{"rotate-180":s.expandedPlatform==="youtube"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[32]||(t[32]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),s.expandedPlatform==="youtube"?(n(),u("div",X,[e.value.youtube_link?(n(),u("div",Z,[l("a",{href:e.value.youtube_link,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate flex-1"},h(e.value.youtube_link),9,$),r(f,{onClick:t[7]||(t[7]=_(o=>a.clearLink("youtube"),["stop"])),variant:"ghost",size:"sm",icon:"x","icon-only":"",class:"shrink-0 text-gray-400 hover:text-red-500"})])):d("",!0),s.platformWarnings?.youtube&&!e.value.youtube_link?(n(),b(C,{key:1,variant:"warning",class:"mb-3"},{default:g(()=>[l("div",ee,[l("span",te,h(s.platformWarnings.youtube),1),s.searchingYouTube?d("",!0):(n(),b(f,{key:0,onClick:t[8]||(t[8]=o=>a.searchPlatform("youtube",!0)),variant:"primary",size:"sm",text:"Search Anyway"}))])]),_:1})):d("",!0),s.platformResults?.youtube?.length>0&&!e.value.youtube_link?(n(),u("div",se,[l("label",le,h(s.platformResults.youtube.length)+" matches found ",1),r(y,{modelValue:s.selectedYouTube,"onUpdate:modelValue":[t[9]||(t[9]=o=>s.selectedYouTube=o),t[10]||(t[10]=o=>a.onPlatformSelected("youtube",o))],options:a.youtubeOptions,placeholder:"Select a video..."},null,8,["modelValue","options"])])):d("",!0),l("div",oe,[l("div",ie,[r(k,{modelValue:s.manualYouTube,"onUpdate:modelValue":[t[11]||(t[11]=o=>s.manualYouTube=o),t[12]||(t[12]=o=>a.onManualInput("youtube",o))],placeholder:"Enter YouTube URL manually...",type:"url"},null,8,["modelValue"])]),r(f,{onClick:t[13]||(t[13]=o=>a.searchPlatform("youtube")),loading:s.searchingYouTube,variant:"secondary",class:"shrink-0",icon:"magnifying-glass","icon-only":""},null,8,["loading"])])])):d("",!0)]),_:1}),r(v,{inset:!0,class:"p-0 overflow-hidden"},{default:g(()=>[l("div",{class:"flex items-center gap-3 px-4 py-3 cursor-pointer select-none border-b bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700",onClick:t[14]||(t[14]=o=>s.expandedPlatform=s.expandedPlatform==="spotify"?null:"spotify")},[(n(),u("svg",{class:c(["w-5 h-5 shrink-0",e.value.spotify_link?"text-[#1DB954]":"text-gray-400 dark:text-gray-500"]),viewBox:"0 0 24 24",fill:"currentColor"},[...t[33]||(t[33]=[l("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"},null,-1)])],2)),l("span",{class:c(["font-semibold",e.value.spotify_link?"text-[#1DB954]":"text-gray-700 dark:text-gray-300"])},"Spotify",2),r(x,{class:"ml-auto",text:a.getStatusText("spotify"),color:a.getStatusBadgeColor("spotify"),size:"sm",pill:""},null,8,["text","color"]),(n(),u("svg",{class:c(["w-4 h-4 transition-transform shrink-0",{"rotate-180":s.expandedPlatform==="spotify"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[34]||(t[34]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),s.expandedPlatform==="spotify"?(n(),u("div",ae,[e.value.spotify_link?(n(),u("div",ne,[l("a",{href:e.value.spotify_link,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate flex-1"},h(e.value.spotify_link),9,re),r(f,{onClick:t[15]||(t[15]=_(o=>a.clearLink("spotify"),["stop"])),variant:"ghost",size:"sm",icon:"x","icon-only":"",class:"shrink-0 text-gray-400 hover:text-red-500"})])):d("",!0),s.platformResults?.spotify?.length>0&&!e.value.spotify_link?(n(),u("div",ue,[l("label",de,h(s.platformResults.spotify.length)+" matches found ",1),r(y,{modelValue:s.selectedSpotify,"onUpdate:modelValue":[t[16]||(t[16]=o=>s.selectedSpotify=o),t[17]||(t[17]=o=>a.onPlatformSelected("spotify",o))],options:a.spotifyOptions,placeholder:"Select an episode..."},null,8,["modelValue","options"])])):d("",!0),l("div",pe,[l("div",ce,[r(k,{modelValue:s.manualSpotify,"onUpdate:modelValue":[t[18]||(t[18]=o=>s.manualSpotify=o),t[19]||(t[19]=o=>a.onManualInput("spotify",o))],placeholder:"Enter Spotify URL manually...",type:"url"},null,8,["modelValue"])]),r(f,{onClick:t[20]||(t[20]=o=>a.searchPlatform("spotify")),loading:s.searchingSpotify,variant:"secondary",class:"shrink-0",icon:"magnifying-glass","icon-only":""},null,8,["loading"])])])):d("",!0)]),_:1}),r(v,{inset:!0,class:"p-0 overflow-hidden"},{default:g(()=>[l("div",{class:"flex items-center gap-3 px-4 py-3 cursor-pointer select-none border-b bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700",onClick:t[21]||(t[21]=o=>s.expandedPlatform=s.expandedPlatform==="apple"?null:"apple")},[(n(),u("svg",{class:c(["w-5 h-5 shrink-0",e.value.apple_podcasts_link?"text-[#9933CC]":"text-gray-400 dark:text-gray-500"]),viewBox:"0 0 24 24",fill:"currentColor"},[...t[35]||(t[35]=[l("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"},null,-1)])],2)),l("span",{class:c(["font-semibold",e.value.apple_podcasts_link?"text-[#9933CC]":"text-gray-700 dark:text-gray-300"])},"Apple Podcasts",2),r(x,{class:"ml-auto",text:a.getStatusText("apple"),color:a.getStatusBadgeColor("apple"),size:"sm",pill:""},null,8,["text","color"]),(n(),u("svg",{class:c(["w-4 h-4 transition-transform shrink-0",{"rotate-180":s.expandedPlatform==="apple"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[36]||(t[36]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),s.expandedPlatform==="apple"?(n(),u("div",he,[e.value.apple_podcasts_link?(n(),u("div",fe,[l("a",{href:e.value.apple_podcasts_link,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate flex-1"},h(e.value.apple_podcasts_link),9,me),r(f,{onClick:t[22]||(t[22]=_(o=>a.clearLink("apple"),["stop"])),variant:"ghost",size:"sm",icon:"x","icon-only":"",class:"shrink-0 text-gray-400 hover:text-red-500"})])):d("",!0),s.platformResults?.apple_podcasts?.length>0&&!e.value.apple_podcasts_link?(n(),u("div",ye,[l("label",ge,h(s.platformResults.apple_podcasts.length)+" matches found ",1),r(y,{modelValue:s.selectedApple,"onUpdate:modelValue":[t[23]||(t[23]=o=>s.selectedApple=o),t[24]||(t[24]=o=>a.onPlatformSelected("apple",o))],options:a.appleOptions,placeholder:"Select an episode..."},null,8,["modelValue","options"])])):d("",!0),l("div",be,[l("div",ke,[r(k,{modelValue:s.manualApple,"onUpdate:modelValue":[t[25]||(t[25]=o=>s.manualApple=o),t[26]||(t[26]=o=>a.onManualInput("apple",o))],placeholder:"Enter Apple Podcasts URL manually...",type:"url"},null,8,["modelValue"])]),r(f,{onClick:t[27]||(t[27]=o=>a.searchPlatform("apple")),loading:s.searchingApple,variant:"secondary",class:"shrink-0",icon:"magnifying-glass","icon-only":""},null,8,["loading"])])])):d("",!0)]),_:1})])):d("",!0),s.error?(n(),b(C,{key:2,variant:"danger",class:"mt-4"},{default:g(()=>[S(h(s.error),1)]),_:1})):d("",!0)])}const xe=A(F,[["render",ve]]),_e={mixins:[T],components:{Alert:P,Button:w,Card:R,Icon:I},data(){return{fetching:!1,error:null}},methods:{async fetchLivestream(){if(!this.meta.entryId){this.error="Please save the entry first before fetching the livestream.";return}this.fetching=!0,this.error=null;try{const e=await this.$axios.post(`/cp/podcast-link-finder/youtube-livestream/${this.meta.entryId}`);e.data.success?this.$emit("update:value",e.data.url):this.error=e.data.message||"Failed to fetch livestream"}catch(e){console.error("Livestream fetch error:",e),e.response&&e.response.data&&e.response.data.message?this.error=e.response.data.message:this.error="Failed to fetch livestream. Please try again."}finally{this.fetching=!1}},clearUrl(){this.$emit("update:value",null),this.error=null}}},Se={class:"youtube-livestream-fieldtype"},Ce={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Te={class:"flex items-center justify-between gap-4"},Pe={key:1,class:"flex items-center text-xs text-blue-600 dark:text-blue-300"},we={class:"flex items-center gap-3"},Re={class:"flex-1 min-w-0"},Ae=["href"],Le={key:3,class:"text-sm text-gray-500 dark:text-gray-400"},Ie={key:0},Ve={key:1};function Ee(e,t,i,p,s,a){const k=m("Button"),y=m("Icon"),f=m("Alert"),v=m("Card");return n(),u("div",Se,[e.meta.enabled?!e.value&&e.meta.showButton?(n(),b(v,{key:1,class:"p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"},{default:g(()=>[l("div",Te,[t[1]||(t[1]=l("div",{class:"flex-1"},[l("div",{class:"text-sm font-medium text-blue-800 dark:text-blue-300"}," Fetch YouTube Livestream "),l("div",{class:"text-xs mt-0.5 text-blue-600 dark:text-blue-400"}," Auto-fetch the scheduled livestream for this message's air date ")],-1)),s.fetching?(n(),u("span",Pe,[r(y,{name:"loading",class:"size-4 mr-2"}),t[0]||(t[0]=S(" Fetching... ",-1))])):(n(),b(k,{key:0,onClick:a.fetchLivestream,variant:"primary",size:"sm",text:"Fetch Livestream"},null,8,["onClick"]))]),s.error?(n(),b(f,{key:0,variant:"danger",class:"mt-3"},{default:g(()=>[S(h(s.error),1)]),_:1})):d("",!0)]),_:1})):e.value?(n(),b(v,{key:2,class:"p-4 bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"},{default:g(()=>[l("div",we,[r(y,{name:"check-circle",class:"size-5 text-green-600 dark:text-green-400 flex-shrink-0"}),l("div",Re,[t[2]||(t[2]=l("div",{class:"text-sm font-medium text-green-800 dark:text-green-300"}," YouTube Livestream ",-1)),l("a",{href:e.value,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate block"},h(e.value),9,Ae)]),r(k,{onClick:a.clearUrl,variant:"ghost",size:"sm",icon:"x",title:"Clear URL"},null,8,["onClick"])])]),_:1})):(n(),u("div",Le,[e.meta.airDate?(n(),u("span",Ve,"Air date is in the past")):(n(),u("span",Ie,"Set an air date to enable livestream fetch"))])):(n(),u("div",Ce," YouTube Livestream fetch is disabled "))])}const Me=A(_e,[["render",Ee]]);Statamic.$components.register("podcast_link_finder-fieldtype",xe);Statamic.$components.register("you_tube_livestream-fieldtype",Me);

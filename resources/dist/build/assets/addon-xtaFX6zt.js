const{Fieldtype:w,IndexFieldtype:Oe,FieldtypeMixin:Ue,HasActionsMixin:je,HasInputOptionsMixin:We,HasPreferencesMixin:Ne,IndexFieldtypeMixin:Ke,InlineEditForm:Ge,DateFormatter:Qe,ItemActions:qe,RelatedItem:Je,RestoreRevision:Xe,RevisionHistory:Ze,RevisionPreview:$e,SaveButtonOptions:et,SortableList:tt,requireElevatedSession:st,requireElevatedSessionIf:lt,clone:ot,deepClone:rt,resetValuesFromResponse:it}=__STATAMIC__.core,{Alert:T,AuthCard:nt,Avatar:at,Badge:ut,Button:P,ButtonGroup:dt,Calendar:pt,Card:R,CardList:ct,CardListItem:ht,CardPanel:ft,CharacterCounter:mt,Checkbox:gt,CheckboxGroup:yt,CodeEditor:kt,Combobox:bt,CommandPaletteItem:vt,ConfirmationModal:xt,Context:Ct,ContextFooter:St,ContextHeader:_t,ContextItem:wt,ContextLabel:Tt,ContextMenu:Pt,ContextSeparator:Rt,CreateForm:Mt,DatePicker:At,DateRangePicker:Lt,Description:zt,DocsCallout:Vt,DragHandle:Et,Dropdown:It,DropdownItem:Dt,DropdownLabel:Ht,DropdownMenu:Bt,DropdownSeparator:Ft,DropdownFooter:Yt,DropdownHeader:Ot,Editable:Ut,ErrorMessage:jt,EmptyStateItem:Wt,EmptyStateMenu:Nt,Field:Kt,Header:Gt,Heading:Qt,HoverCard:qt,Icon:A,Input:L,InputGroup:Jt,InputGroupAppend:Xt,InputGroupPrepend:Zt,Label:$t,Listing:es,ListingCustomizeColumns:ts,ListingFilters:ss,ListingHeaderCell:ls,ListingPagination:os,ListingPresets:rs,ListingPresetTrigger:is,ListingRowActions:ns,ListingSearch:as,ListingTable:us,ListingTableBody:ds,ListingTableHead:ps,ListingToggleAll:cs,LivePreview:hs,LivePreviewPopout:fs,Modal:ms,ModalClose:gs,ModalTitle:ys,Pagination:ks,Panel:bs,PanelFooter:vs,PanelHeader:xs,Popover:Cs,PublishComponents:Ss,PublishContainer:_s,publishContextKey:ws,injectPublishContext:Ts,PublishField:Ps,PublishFields:Rs,PublishFieldsProvider:Ms,PublishForm:As,PublishLocalizations:Ls,PublishSections:zs,PublishTabs:Vs,Radio:Es,RadioGroup:Is,Select:z,Separator:Ds,Slider:Hs,Skeleton:Bs,SplitterGroup:Fs,SplitterPanel:Ys,SplitterResizeHandle:Os,StatusIndicator:Us,Subheading:js,Switch:Ws,TabContent:Ns,Stack:Ks,StackClose:Gs,StackHeader:Qs,StackFooter:qs,StackContent:Js,Table:Xs,TableCell:Zs,TableColumn:$s,TableColumns:el,TableRow:tl,TableRows:sl,TabList:ll,TabProvider:ol,Tabs:rl,TabTrigger:il,Textarea:nl,TimePicker:al,ToggleGroup:ul,ToggleItem:dl,Widget:pl,registerIconSet:cl,registerIconSetFromStrings:hl}=__STATAMIC__.ui,V=window.Vue,{BaseTransition:fl,BaseTransitionPropsValidators:ml,Comment:gl,DeprecationTypes:yl,EffectScope:kl,ErrorCodes:bl,ErrorTypeStrings:vl,Fragment:xl,KeepAlive:Cl,ReactiveEffect:Sl,Static:_l,Suspense:wl,Teleport:Tl,Text:Pl,TrackOpTypes:Rl,Transition:Ml,TransitionGroup:Al,TriggerOpTypes:Ll,VueElement:zl,__esModule:Vl,assertNumber:El,callWithAsyncErrorHandling:Il,callWithErrorHandling:Dl,camelize:Hl,capitalize:Bl,cloneVNode:Fl,compatUtils:Yl,compile:Ol,computed:Ul,createApp:jl,createBlock:y,createCommentVNode:d,createElementBlock:a,createElementVNode:s,createHydrationRenderer:Wl,createPropsRestProxy:Nl,createRenderer:Kl,createSSRApp:Gl,createSlots:Ql,createStaticVNode:ql,createTextVNode:C,createVNode:u,customRef:Jl,defineAsyncComponent:Xl,defineComponent:Zl,defineCustomElement:$l,defineEmits:eo,defineExpose:to,defineModel:so,defineOptions:lo,defineProps:oo,defineSSRCustomElement:ro,defineSlots:io,devtools:no,effect:ao,effectScope:uo,getCurrentInstance:po,getCurrentScope:co,getCurrentWatcher:ho,getTransitionRawChildren:fo,guardReactiveProps:mo,h:go,handleError:yo,hasInjectionContext:ko,hydrate:bo,hydrateOnIdle:vo,hydrateOnInteraction:xo,hydrateOnMediaQuery:Co,hydrateOnVisible:So,initCustomFormatter:_o,initDirectivesForSSR:wo,inject:To,isMemoSame:Po,isProxy:Ro,isReactive:Mo,isReadonly:Ao,isRef:Lo,isRuntimeOnly:zo,isShallow:Vo,isVNode:Eo,markRaw:Io,mergeDefaults:Do,mergeModels:Ho,mergeProps:Bo,nextTick:Fo,nodeOps:Yo,normalizeClass:f,normalizeProps:Oo,normalizeStyle:x,onActivated:Uo,onBeforeMount:jo,onBeforeUnmount:Wo,onBeforeUpdate:No,onDeactivated:Ko,onErrorCaptured:Go,onMounted:Qo,onRenderTracked:qo,onRenderTriggered:Jo,onScopeDispose:Xo,onServerPrefetch:Zo,onUnmounted:$o,onUpdated:er,onWatcherCleanup:tr,openBlock:i,patchProp:sr,popScopeId:lr,provide:or,proxyRefs:rr,pushScopeId:ir,queuePostFlushCb:nr,reactive:ar,readonly:ur,ref:dr,registerRuntimeCompiler:pr,render:cr,renderList:hr,renderSlot:fr,resolveComponent:k,resolveDirective:mr,resolveDynamicComponent:gr,resolveFilter:yr,resolveTransitionHooks:kr,setBlockTracking:br,setDevtoolsHook:vr,setTransitionHooks:xr,shallowReactive:Cr,shallowReadonly:Sr,shallowRef:_r,ssrContextKey:wr,ssrUtils:Tr,stop:Pr,toDisplayString:p,toHandlerKey:Rr,toHandlers:Mr,toRaw:Ar,toRef:Lr,toRefs:zr,toValue:Vr,transformVNodeArgs:Er,triggerRef:Ir,unref:Dr,useAttrs:Hr,useCssModule:Br,useCssVars:Fr,useHost:Yr,useId:Or,useModel:Ur,useSSRContext:jr,useShadowRoot:Wr,useSlots:Nr,useTemplateRef:Kr,useTransitionState:Gr,vModelCheckbox:Qr,vModelDynamic:qr,vModelRadio:Jr,vModelSelect:Xr,vModelText:Zr,vShow:$r,version:ei,warn:ti,watch:si,watchEffect:li,watchPostEffect:oi,watchSyncEffect:ri,withAsyncContext:ii,withCtx:c,withDefaults:ni,withDirectives:ai,withKeys:ui,withMemo:di,withModifiers:S,withScopeId:pi}=V,M=(t,e)=>{const n=t.__vccOpts||t;for(const[h,l]of e)n[h]=l;return n},E={mixins:[w],components:{Alert:T,Button:P,Card:R,Input:L,Select:z},data(){return{episodes:[],searchQuery:"",episodeStatus:"published",episodeLimit:20,selectedEpisodeId:null,loading:!1,searchingPlatforms:!1,searchingYouTube:!1,searchingSpotify:!1,searchingApple:!1,error:null,searchTimeout:null,platformResults:null,platformWarnings:null,selectedYouTube:null,selectedSpotify:null,selectedApple:null,manualYouTube:"",manualSpotify:"",manualApple:"",expandedPlatform:null,initializing:!0,isDark:!1,darkModeObserver:null}},computed:{statusOptions(){return[{value:"published",label:"Published"},{value:"scheduled",label:"Scheduled"},{value:"draft",label:"Draft"},{value:"all",label:"All Episodes"}]},limitOptions(){return[{value:20,label:"20"},{value:50,label:"50"},{value:100,label:"100"}]},episodeOptions(){return this.episodes.map(t=>({value:t.id,label:`${t.title} (${this.formatDate(t.published_at)})`}))},youtubeOptions(){return(this.platformResults?.youtube||[]).map(t=>({value:t.url,label:`${t.title} (${t.score}% match)`}))},spotifyOptions(){return(this.platformResults?.spotify||[]).map(t=>({value:t.url,label:`${t.title} (${t.score}% match)`}))},appleOptions(){return(this.platformResults?.apple_podcasts||[]).map(t=>({value:t.url,label:`${t.title} (${t.score}% match)`}))},linkedCount(){let t=0;return this.value.youtube_link&&t++,this.value.spotify_link&&t++,this.value.apple_podcasts_link&&t++,t},hasUnlinkedPlatforms(){return!this.value.youtube_link||!this.value.spotify_link||!this.value.apple_podcasts_link},youtubeHeaderClass(){return this.getHeaderClass(this.value.youtube_link)},spotifyHeaderClass(){return this.getHeaderClass(this.value.spotify_link)},appleHeaderClass(){return this.getHeaderClass(this.value.apple_podcasts_link)},youtubeHeaderStyle(){return this.getHeaderStyle(this.value.youtube_link)},spotifyHeaderStyle(){return this.getHeaderStyle(this.value.spotify_link)},appleHeaderStyle(){return this.getHeaderStyle(this.value.apple_podcasts_link)}},mounted(){this.loadEpisodes(),this.value&&this.value.episode_id&&(this.selectedEpisodeId=this.value.episode_id,this.manualYouTube=this.value.youtube_link||"",this.manualSpotify=this.value.spotify_link||"",this.manualApple=this.value.apple_podcasts_link||""),this.$nextTick(()=>{this.initializing=!1}),this.isDark=document.documentElement.classList.contains("dark"),this.darkModeObserver=new MutationObserver(t=>{for(const e of t)e.attributeName==="class"&&(this.isDark=document.documentElement.classList.contains("dark"))}),this.darkModeObserver.observe(document.documentElement,{attributes:!0})},beforeUnmount(){this.darkModeObserver&&this.darkModeObserver.disconnect()},methods:{async loadEpisodes(t=""){this.loading=!0,this.error=null;try{const e=await this.$axios.get("/cp/podcast-link-finder/search-episodes",{params:{query:t,status:this.episodeStatus,limit:this.episodeLimit}});this.episodes=e.data.episodes||[]}catch(e){this.error="Failed to load episodes. Please check your API credentials.",console.error(e)}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadEpisodes(this.searchQuery)},500)},async onEpisodeSelected(){if(!this.selectedEpisodeId){this.$emit("update:value",{episode_id:null,episode_title:null,spotify_link:null,apple_podcasts_link:null,youtube_link:null}),this.platformResults=null,this.platformWarnings=null,this.selectedYouTube=null,this.selectedSpotify=null,this.selectedApple=null,this.manualYouTube="",this.manualSpotify="",this.manualApple="",this.expandedPlatform=null;return}const t=this.episodes.find(e=>e.id===this.selectedEpisodeId);this.$emit("update:value",{episode_id:t.id,episode_title:t.title,spotify_link:null,apple_podcasts_link:null,youtube_link:null}),this.platformResults=null,this.platformWarnings=null,this.selectedYouTube=null,this.selectedSpotify=null,this.selectedApple=null,this.manualYouTube="",this.manualSpotify="",this.manualApple="",this.config.auto_find!==!1&&await this.searchAllPlatforms()},async searchAllPlatforms(t=!1){this.searchingPlatforms=!0,this.searchingYouTube=!0,this.searchingSpotify=!0,this.searchingApple=!0,this.error=null;try{const e=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId,force_youtube:t});if(e.data.success&&(this.platformResults=e.data.results,this.platformWarnings=e.data.warnings||null,this.config.auto_find!==!1)){if(this.platformResults.youtube?.length>0){const n=this.platformResults.youtube[0].url;this.selectedYouTube=n,this.manualYouTube=n,this.updateLink("youtube",n)}if(this.platformResults.spotify?.length>0){const n=this.platformResults.spotify[0].url;this.selectedSpotify=n,this.manualSpotify=n,this.updateLink("spotify",n)}if(this.platformResults.apple_podcasts?.length>0){const n=this.platformResults.apple_podcasts[0].url;this.selectedApple=n,this.manualApple=n,this.updateLink("apple",n)}}}catch(e){this.error="Failed to search platforms. You can enter links manually.",console.error(e)}finally{this.searchingPlatforms=!1,this.searchingYouTube=!1,this.searchingSpotify=!1,this.searchingApple=!1}},async searchMissingPlatforms(){this.searchingPlatforms=!0,this.error=null;const t=[];this.value.youtube_link||t.push("youtube"),this.value.spotify_link||t.push("spotify"),this.value.apple_podcasts_link||t.push("apple");try{const e=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId||this.value.episode_id,force_youtube:!1});if(e.data.success){if(this.platformResults=e.data.results,this.platformWarnings=e.data.warnings||null,t.includes("youtube")&&this.platformResults.youtube?.length>0){const n=this.platformResults.youtube[0].url;this.selectedYouTube=n,this.manualYouTube=n,this.updateLink("youtube",n)}if(t.includes("spotify")&&this.platformResults.spotify?.length>0){const n=this.platformResults.spotify[0].url;this.selectedSpotify=n,this.manualSpotify=n,this.updateLink("spotify",n)}if(t.includes("apple")&&this.platformResults.apple_podcasts?.length>0){const n=this.platformResults.apple_podcasts[0].url;this.selectedApple=n,this.manualApple=n,this.updateLink("apple",n)}}}catch(e){this.error="Failed to search platforms. You can enter links manually.",console.error(e)}finally{this.searchingPlatforms=!1}},async searchPlatform(t,e=!1){const n=t==="apple"?"searchingApple":`searching${t.charAt(0).toUpperCase()+t.slice(1)}`;this[n]=!0;try{const h=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId||this.value.episode_id,force_youtube:t==="youtube"&&e});if(h.data.success){this.platformResults||(this.platformResults={youtube:[],spotify:[],apple_podcasts:[]});const l=t==="apple"?"apple_podcasts":t;this.platformResults[l]=h.data.results[l]||[],h.data.warnings&&(this.platformWarnings={...this.platformWarnings,...h.data.warnings},t==="youtube"&&e&&(this.platformWarnings.youtube=null))}}catch(h){console.error(`Failed to search ${t}:`,h)}finally{this[n]=!1}},onPlatformSelected(t,e){t==="youtube"?this.manualYouTube=e||"":t==="spotify"?this.manualSpotify=e||"":t==="apple"&&(this.manualApple=e||""),this.updateLink(t,e)},onManualInput(t,e){t==="youtube"?this.selectedYouTube=e:t==="spotify"?this.selectedSpotify=e:t==="apple"&&(this.selectedApple=e),this.updateLink(t,e)},updateLink(t,e){const n=t==="youtube"?"youtube_link":t==="spotify"?"spotify_link":"apple_podcasts_link";this.$emit("update:value",{...this.value,[n]:e||null})},clearLink(t){t==="youtube"?(this.selectedYouTube=null,this.manualYouTube=""):t==="spotify"?(this.selectedSpotify=null,this.manualSpotify=""):t==="apple"&&(this.selectedApple=null,this.manualApple=""),this.updateLink(t,null)},getStatusText(t){if(t==="youtube"?this.searchingYouTube:t==="spotify"?this.searchingSpotify:this.searchingApple)return"Searching...";if(t==="youtube"?this.value.youtube_link:t==="spotify"?this.value.spotify_link:this.value.apple_podcasts_link)return"Linked";const h=t==="apple"?"apple_podcasts":t,l=this.platformResults?.[h]?.length>0;return l?"Match found":this.platformResults&&!l?"No match":"Not linked"},getStatusBadgeClass(){return"text-xs px-2 py-0.5 rounded-full font-medium"},getStatusBadgeStyle(t){if(t==="youtube"?this.searchingYouTube:t==="spotify"?this.searchingSpotify:this.searchingApple)return{backgroundColor:this.isDark?"rgb(30, 58, 138)":"rgb(219, 234, 254)",color:this.isDark?"rgb(191, 219, 254)":"rgb(29, 78, 216)"};if(t==="youtube"?this.value.youtube_link:t==="spotify"?this.value.spotify_link:this.value.apple_podcasts_link)return{backgroundColor:this.isDark?"rgb(20, 83, 45)":"rgb(220, 252, 231)",color:this.isDark?"rgb(187, 247, 208)":"rgb(21, 128, 61)"};const h=t==="apple"?"apple_podcasts":t,l=this.platformResults?.[h]?.length>0;return l?{backgroundColor:this.isDark?"rgb(120, 53, 15)":"rgb(254, 243, 199)",color:this.isDark?"rgb(253, 230, 138)":"rgb(180, 83, 9)"}:this.platformResults&&!l?{backgroundColor:this.isDark?"rgb(124, 45, 18)":"rgb(255, 237, 213)",color:this.isDark?"rgb(254, 215, 170)":"rgb(194, 65, 12)"}:{backgroundColor:this.isDark?"rgb(55, 65, 81)":"rgb(243, 244, 246)",color:this.isDark?"rgb(209, 213, 219)":"rgb(75, 85, 99)"}},formatDate(t){return t?new Date(t).toLocaleDateString():""},getHeaderClass(t){return"border-b"},getHeaderStyle(t){return t?{backgroundColor:this.isDark?"rgb(20, 83, 45)":"rgb(220, 252, 231)",color:this.isDark?"rgb(187, 247, 208)":"rgb(22, 101, 52)",borderColor:this.isDark?"rgb(22, 101, 52)":"rgb(187, 247, 208)"}:{backgroundColor:this.isDark?"rgb(55, 65, 81)":"rgb(243, 244, 246)",color:this.isDark?"rgb(209, 213, 219)":"rgb(55, 65, 81)",borderColor:this.isDark?"rgb(75, 85, 99)":"rgb(229, 231, 235)"}}}},I={class:"podcast-link-finder"},D={class:"mb-6"},H={class:"flex gap-2 mb-2"},B={class:"flex-1 min-w-0"},F={class:"shrink-0"},Y={class:"shrink-0"},O={key:0,class:"flex items-center py-2 text-gray-600 dark:text-gray-400"},U={key:0,class:"mb-6"},j={class:"flex items-center justify-between gap-4"},W={class:"min-w-0"},N={class:"font-medium text-gray-900 dark:text-gray-100 truncate"},K={class:"flex items-center gap-3 shrink-0"},G={class:"flex items-center gap-1.5 text-sm"},Q={class:"text-gray-500 dark:text-gray-400 ml-1"},q={key:0,class:"animate-spin size-4 mr-1.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},J={key:1,class:"space-y-3"},X={key:0,class:"p-4 border-t border-gray-200 dark:border-dark-400"},Z={key:0,class:"flex items-center gap-2 mb-3 p-2 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800"},$=["href"],ee={class:"flex items-center justify-between gap-3"},te={class:"text-sm"},se={key:2,class:"mb-3"},le={class:"text-xs text-gray-500 dark:text-gray-400 mb-1 block"},oe={class:"flex gap-2"},re={class:"flex-1"},ie={key:0,class:"animate-spin size-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ne={key:1,class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ae={key:0,class:"p-4 border-t border-gray-200 dark:border-dark-400"},ue={key:0,class:"flex items-center gap-2 mb-3 p-2 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800"},de=["href"],pe={key:1,class:"mb-3"},ce={class:"text-xs text-gray-500 dark:text-gray-400 mb-1 block"},he={class:"flex gap-2"},fe={class:"flex-1"},me={key:0,class:"animate-spin size-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ge={key:1,class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ye={key:0,class:"p-4 border-t border-gray-200 dark:border-dark-400"},ke={key:0,class:"flex items-center gap-2 mb-3 p-2 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800"},be=["href"],ve={key:1,class:"mb-3"},xe={class:"text-xs text-gray-500 dark:text-gray-400 mb-1 block"},Ce={class:"flex gap-2"},Se={class:"flex-1"},_e={key:0,class:"animate-spin size-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},we={key:1,class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Te(t,e,n,h,l,o){const b=k("Input"),g=k("Select"),m=k("Button"),v=k("Card"),_=k("Alert");return i(),a("div",I,[s("div",D,[e[29]||(e[29]=s("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-2 block"}," Select Episode from Transistor ",-1)),s("div",H,[s("div",B,[u(b,{modelValue:l.searchQuery,"onUpdate:modelValue":[e[0]||(e[0]=r=>l.searchQuery=r),o.debouncedSearch],placeholder:"Search episodes..."},null,8,["modelValue","onUpdate:modelValue"])]),s("div",F,[u(g,{modelValue:l.episodeStatus,"onUpdate:modelValue":[e[1]||(e[1]=r=>l.episodeStatus=r),e[2]||(e[2]=r=>o.loadEpisodes(l.searchQuery))],options:o.statusOptions},null,8,["modelValue","options"])]),s("div",Y,[u(g,{modelValue:l.episodeLimit,"onUpdate:modelValue":[e[3]||(e[3]=r=>l.episodeLimit=r),e[4]||(e[4]=r=>o.loadEpisodes(l.searchQuery))],options:o.limitOptions},null,8,["modelValue","options"])])]),l.loading?(i(),a("div",O,[...e[28]||(e[28]=[s("svg",{class:"animate-spin size-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),s("span",{class:"text-sm"},"Loading episodes...",-1)])])):(i(),y(g,{key:1,modelValue:l.selectedEpisodeId,"onUpdate:modelValue":[e[5]||(e[5]=r=>l.selectedEpisodeId=r),o.onEpisodeSelected],options:o.episodeOptions,placeholder:"Select an episode..."},null,8,["modelValue","onUpdate:modelValue","options"]))]),t.value.episode_title?(i(),a("div",U,[u(v,{class:"p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"},{default:c(()=>[s("div",j,[s("div",W,[e[30]||(e[30]=s("div",{class:"text-xs uppercase tracking-wide text-blue-600 dark:text-blue-400 mb-1"}," Selected Episode ",-1)),s("div",N,p(t.value.episode_title),1)]),s("div",K,[s("div",G,[s("span",{class:f(["size-2.5 rounded-full",t.value.youtube_link?"bg-green-500":"bg-gray-300 dark:bg-gray-600"])},null,2),s("span",{class:f(["size-2.5 rounded-full",t.value.spotify_link?"bg-green-500":"bg-gray-300 dark:bg-gray-600"])},null,2),s("span",{class:f(["size-2.5 rounded-full",t.value.apple_podcasts_link?"bg-green-500":"bg-gray-300 dark:bg-gray-600"])},null,2),s("span",Q,p(o.linkedCount)+"/3 ",1)]),o.hasUnlinkedPlatforms?(i(),y(m,{key:0,onClick:o.searchMissingPlatforms,disabled:l.searchingPlatforms,variant:"primary",size:"sm"},{default:c(()=>[l.searchingPlatforms?(i(),a("svg",q,[...e[31]||(e[31]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):d("",!0),C(" "+p(l.searchingPlatforms?"Searching...":"Search Missing"),1)]),_:1},8,["onClick","disabled"])):d("",!0)])])]),_:1})])):d("",!0),t.value.episode_id?(i(),a("div",J,[u(v,{inset:!0,class:"p-0 overflow-hidden"},{default:c(()=>[s("div",{class:f(["flex items-center gap-3 px-4 py-3 cursor-pointer select-none",o.youtubeHeaderClass]),style:x(o.youtubeHeaderStyle),onClick:e[6]||(e[6]=r=>l.expandedPlatform=l.expandedPlatform==="youtube"?null:"youtube")},[e[33]||(e[33]=s("svg",{class:"w-5 h-5 shrink-0",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})],-1)),e[34]||(e[34]=s("span",{class:"font-semibold"},"YouTube",-1)),s("span",{class:f(["ml-auto",o.getStatusBadgeClass()]),style:x(o.getStatusBadgeStyle("youtube"))},p(o.getStatusText("youtube")),7),(i(),a("svg",{class:f(["w-4 h-4 transition-transform shrink-0",{"rotate-180":l.expandedPlatform==="youtube"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[32]||(e[32]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],6),l.expandedPlatform==="youtube"?(i(),a("div",X,[t.value.youtube_link?(i(),a("div",Z,[e[36]||(e[36]=s("svg",{class:"size-4 text-green-600 dark:text-green-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),s("a",{href:t.value.youtube_link,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate flex-1"},p(t.value.youtube_link),9,$),u(m,{onClick:e[7]||(e[7]=S(r=>o.clearLink("youtube"),["stop"])),variant:"ghost",size:"sm",class:"shrink-0 text-gray-400 hover:text-red-500"},{default:c(()=>[...e[35]||(e[35]=[s("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:1})])):d("",!0),l.platformWarnings?.youtube&&!t.value.youtube_link?(i(),y(_,{key:1,variant:"warning",class:"mb-3"},{default:c(()=>[s("div",ee,[s("span",te,p(l.platformWarnings.youtube),1),l.searchingYouTube?d("",!0):(i(),y(m,{key:0,onClick:e[8]||(e[8]=r=>o.searchPlatform("youtube",!0)),variant:"primary",size:"sm",text:"Search Anyway"}))])]),_:1})):d("",!0),l.platformResults?.youtube?.length>0&&!t.value.youtube_link?(i(),a("div",se,[s("label",le,p(l.platformResults.youtube.length)+" matches found ",1),u(g,{modelValue:l.selectedYouTube,"onUpdate:modelValue":[e[9]||(e[9]=r=>l.selectedYouTube=r),e[10]||(e[10]=r=>o.onPlatformSelected("youtube",r))],options:o.youtubeOptions,placeholder:"Select a video..."},null,8,["modelValue","options"])])):d("",!0),s("div",oe,[s("div",re,[u(b,{modelValue:l.manualYouTube,"onUpdate:modelValue":[e[11]||(e[11]=r=>l.manualYouTube=r),e[12]||(e[12]=r=>o.onManualInput("youtube",r))],placeholder:"Enter YouTube URL manually...",type:"url"},null,8,["modelValue"])]),u(m,{onClick:e[13]||(e[13]=r=>o.searchPlatform("youtube")),disabled:l.searchingYouTube,variant:"secondary",class:"shrink-0"},{default:c(()=>[l.searchingYouTube?(i(),a("svg",ie,[...e[37]||(e[37]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(i(),a("svg",ne,[...e[38]||(e[38]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])]))]),_:1},8,["disabled"])])])):d("",!0)]),_:1}),u(v,{inset:!0,class:"p-0 overflow-hidden"},{default:c(()=>[s("div",{class:f(["flex items-center gap-3 px-4 py-3 cursor-pointer select-none",o.spotifyHeaderClass]),style:x(o.spotifyHeaderStyle),onClick:e[14]||(e[14]=r=>l.expandedPlatform=l.expandedPlatform==="spotify"?null:"spotify")},[e[40]||(e[40]=s("svg",{class:"w-5 h-5 shrink-0",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})],-1)),e[41]||(e[41]=s("span",{class:"font-semibold"},"Spotify",-1)),s("span",{class:f(["ml-auto",o.getStatusBadgeClass()]),style:x(o.getStatusBadgeStyle("spotify"))},p(o.getStatusText("spotify")),7),(i(),a("svg",{class:f(["w-4 h-4 transition-transform shrink-0",{"rotate-180":l.expandedPlatform==="spotify"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[39]||(e[39]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],6),l.expandedPlatform==="spotify"?(i(),a("div",ae,[t.value.spotify_link?(i(),a("div",ue,[e[43]||(e[43]=s("svg",{class:"size-4 text-green-600 dark:text-green-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),s("a",{href:t.value.spotify_link,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate flex-1"},p(t.value.spotify_link),9,de),u(m,{onClick:e[15]||(e[15]=S(r=>o.clearLink("spotify"),["stop"])),variant:"ghost",size:"sm",class:"shrink-0 text-gray-400 hover:text-red-500"},{default:c(()=>[...e[42]||(e[42]=[s("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:1})])):d("",!0),l.platformResults?.spotify?.length>0&&!t.value.spotify_link?(i(),a("div",pe,[s("label",ce,p(l.platformResults.spotify.length)+" matches found ",1),u(g,{modelValue:l.selectedSpotify,"onUpdate:modelValue":[e[16]||(e[16]=r=>l.selectedSpotify=r),e[17]||(e[17]=r=>o.onPlatformSelected("spotify",r))],options:o.spotifyOptions,placeholder:"Select an episode..."},null,8,["modelValue","options"])])):d("",!0),s("div",he,[s("div",fe,[u(b,{modelValue:l.manualSpotify,"onUpdate:modelValue":[e[18]||(e[18]=r=>l.manualSpotify=r),e[19]||(e[19]=r=>o.onManualInput("spotify",r))],placeholder:"Enter Spotify URL manually...",type:"url"},null,8,["modelValue"])]),u(m,{onClick:e[20]||(e[20]=r=>o.searchPlatform("spotify")),disabled:l.searchingSpotify,variant:"secondary",class:"shrink-0"},{default:c(()=>[l.searchingSpotify?(i(),a("svg",me,[...e[44]||(e[44]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(i(),a("svg",ge,[...e[45]||(e[45]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])]))]),_:1},8,["disabled"])])])):d("",!0)]),_:1}),u(v,{inset:!0,class:"p-0 overflow-hidden"},{default:c(()=>[s("div",{class:f(["flex items-center gap-3 px-4 py-3 cursor-pointer select-none",o.appleHeaderClass]),style:x(o.appleHeaderStyle),onClick:e[21]||(e[21]=r=>l.expandedPlatform=l.expandedPlatform==="apple"?null:"apple")},[e[47]||(e[47]=s("svg",{class:"w-5 h-5 shrink-0",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})],-1)),e[48]||(e[48]=s("span",{class:"font-semibold"},"Apple Podcasts",-1)),s("span",{class:f(["ml-auto",o.getStatusBadgeClass()]),style:x(o.getStatusBadgeStyle("apple"))},p(o.getStatusText("apple")),7),(i(),a("svg",{class:f(["w-4 h-4 transition-transform shrink-0",{"rotate-180":l.expandedPlatform==="apple"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[46]||(e[46]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],6),l.expandedPlatform==="apple"?(i(),a("div",ye,[t.value.apple_podcasts_link?(i(),a("div",ke,[e[50]||(e[50]=s("svg",{class:"size-4 text-green-600 dark:text-green-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),s("a",{href:t.value.apple_podcasts_link,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate flex-1"},p(t.value.apple_podcasts_link),9,be),u(m,{onClick:e[22]||(e[22]=S(r=>o.clearLink("apple"),["stop"])),variant:"ghost",size:"sm",class:"shrink-0 text-gray-400 hover:text-red-500"},{default:c(()=>[...e[49]||(e[49]=[s("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:1})])):d("",!0),l.platformResults?.apple_podcasts?.length>0&&!t.value.apple_podcasts_link?(i(),a("div",ve,[s("label",xe,p(l.platformResults.apple_podcasts.length)+" matches found ",1),u(g,{modelValue:l.selectedApple,"onUpdate:modelValue":[e[23]||(e[23]=r=>l.selectedApple=r),e[24]||(e[24]=r=>o.onPlatformSelected("apple",r))],options:o.appleOptions,placeholder:"Select an episode..."},null,8,["modelValue","options"])])):d("",!0),s("div",Ce,[s("div",Se,[u(b,{modelValue:l.manualApple,"onUpdate:modelValue":[e[25]||(e[25]=r=>l.manualApple=r),e[26]||(e[26]=r=>o.onManualInput("apple",r))],placeholder:"Enter Apple Podcasts URL manually...",type:"url"},null,8,["modelValue"])]),u(m,{onClick:e[27]||(e[27]=r=>o.searchPlatform("apple")),disabled:l.searchingApple,variant:"secondary",class:"shrink-0"},{default:c(()=>[l.searchingApple?(i(),a("svg",_e,[...e[51]||(e[51]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(i(),a("svg",we,[...e[52]||(e[52]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])]))]),_:1},8,["disabled"])])])):d("",!0)]),_:1})])):d("",!0),l.error?(i(),y(_,{key:2,variant:"danger",class:"mt-4"},{default:c(()=>[C(p(l.error),1)]),_:1})):d("",!0)])}const Pe=M(E,[["render",Te]]),Re={mixins:[w],components:{Alert:T,Button:P,Card:R,Icon:A},data(){return{fetching:!1,error:null}},methods:{async fetchLivestream(){if(!this.meta.entryId){this.error="Please save the entry first before fetching the livestream.";return}this.fetching=!0,this.error=null;try{const t=await this.$axios.post(`/cp/podcast-link-finder/youtube-livestream/${this.meta.entryId}`);t.data.success?this.$emit("update:value",t.data.url):this.error=t.data.message||"Failed to fetch livestream"}catch(t){console.error("Livestream fetch error:",t),t.response&&t.response.data&&t.response.data.message?this.error=t.response.data.message:this.error="Failed to fetch livestream. Please try again."}finally{this.fetching=!1}},clearUrl(){this.$emit("update:value",null),this.error=null}}},Me={class:"youtube-livestream-fieldtype"},Ae={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Le={class:"flex items-center justify-between gap-4"},ze={key:1,class:"flex items-center text-xs text-blue-600 dark:text-blue-300"},Ve={class:"flex items-center gap-3"},Ee={class:"flex-1 min-w-0"},Ie=["href"],De={key:3,class:"text-sm text-gray-500 dark:text-gray-400"},He={key:0},Be={key:1};function Fe(t,e,n,h,l,o){const b=k("Button"),g=k("Icon"),m=k("Alert"),v=k("Card");return i(),a("div",Me,[t.meta.enabled?!t.value&&t.meta.showButton?(i(),y(v,{key:1,class:"p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"},{default:c(()=>[s("div",Le,[e[1]||(e[1]=s("div",{class:"flex-1"},[s("div",{class:"text-sm font-medium text-blue-800 dark:text-blue-300"}," Fetch YouTube Livestream "),s("div",{class:"text-xs mt-0.5 text-blue-600 dark:text-blue-400"}," Auto-fetch the scheduled livestream for this message's air date ")],-1)),l.fetching?(i(),a("span",ze,[u(g,{name:"loading",class:"size-4 mr-2"}),e[0]||(e[0]=C(" Fetching... ",-1))])):(i(),y(b,{key:0,onClick:o.fetchLivestream,variant:"primary",size:"sm",text:"Fetch Livestream"},null,8,["onClick"]))]),l.error?(i(),y(m,{key:0,variant:"danger",class:"mt-3"},{default:c(()=>[C(p(l.error),1)]),_:1})):d("",!0)]),_:1})):t.value?(i(),y(v,{key:2,class:"p-4 bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"},{default:c(()=>[s("div",Ve,[u(g,{name:"check-circle",class:"size-5 text-green-600 dark:text-green-400 flex-shrink-0"}),s("div",Ee,[e[2]||(e[2]=s("div",{class:"text-sm font-medium text-green-800 dark:text-green-300"}," YouTube Livestream ",-1)),s("a",{href:t.value,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate block"},p(t.value),9,Ie)]),u(b,{onClick:o.clearUrl,variant:"ghost",size:"sm",icon:"x",title:"Clear URL"},null,8,["onClick"])])]),_:1})):(i(),a("div",De,[t.meta.airDate?(i(),a("span",Be,"Air date is in the past")):(i(),a("span",He,"Set an air date to enable livestream fetch"))])):(i(),a("div",Ae," YouTube Livestream fetch is disabled "))])}const Ye=M(Re,[["render",Fe]]);Statamic.$components.register("podcast_link_finder-fieldtype",Pe);Statamic.$components.register("you_tube_livestream-fieldtype",Ye);

const{Fieldtype:_,IndexFieldtype:Ae,FieldtypeMixin:Pe,HasActionsMixin:Ve,HasInputOptionsMixin:Ie,HasPreferencesMixin:Le,IndexFieldtypeMixin:Ee,InlineEditForm:Me,DateFormatter:Ye,ItemActions:Fe,RelatedItem:De,RestoreRevision:Ue,RevisionHistory:ze,RevisionPreview:He,SaveButtonOptions:Oe,SortableList:Be,requireElevatedSession:We,requireElevatedSessionIf:Ne,clone:Ge,deepClone:Qe,resetValuesFromResponse:je}=__STATAMIC__.core,{Alert:T,AuthCard:Ke,Avatar:qe,Badge:Je,Button:C,ButtonGroup:Xe,Calendar:Ze,Card:w,CardList:$e,CardListItem:et,CardPanel:tt,CharacterCounter:st,Checkbox:lt,CheckboxGroup:ot,CodeEditor:rt,Combobox:it,CommandPaletteItem:at,ConfirmationModal:nt,Context:dt,ContextFooter:ut,ContextHeader:pt,ContextItem:ct,ContextLabel:mt,ContextMenu:ht,ContextSeparator:ft,CreateForm:bt,DatePicker:yt,DateRangePicker:gt,Description:kt,DocsCallout:xt,DragHandle:vt,Dropdown:St,DropdownItem:_t,DropdownLabel:Tt,DropdownMenu:Ct,DropdownSeparator:wt,DropdownFooter:Rt,DropdownHeader:At,Editable:Pt,ErrorMessage:Vt,EmptyStateItem:It,EmptyStateMenu:Lt,Field:Et,Header:Mt,Heading:Yt,HoverCard:Ft,Icon:R,Input:P,InputGroup:Dt,InputGroupAppend:Ut,InputGroupPrepend:zt,Label:Ht,Listing:Ot,ListingCustomizeColumns:Bt,ListingFilters:Wt,ListingHeaderCell:Nt,ListingPagination:Gt,ListingPresets:Qt,ListingPresetTrigger:jt,ListingRowActions:Kt,ListingSearch:qt,ListingTable:Jt,ListingTableBody:Xt,ListingTableHead:Zt,ListingToggleAll:$t,LivePreview:es,LivePreviewPopout:ts,Modal:ss,ModalClose:ls,ModalTitle:os,Pagination:rs,Panel:is,PanelFooter:as,PanelHeader:ns,Popover:ds,PublishComponents:us,PublishContainer:ps,publishContextKey:cs,injectPublishContext:ms,PublishField:hs,PublishFields:fs,PublishFieldsProvider:bs,PublishForm:ys,PublishLocalizations:gs,PublishSections:ks,PublishTabs:xs,Radio:vs,RadioGroup:Ss,Select:V,Separator:_s,Slider:Ts,Skeleton:Cs,SplitterGroup:ws,SplitterPanel:Rs,SplitterResizeHandle:As,StatusIndicator:Ps,Subheading:Vs,Switch:Is,TabContent:Ls,Stack:Es,StackClose:Ms,StackHeader:Ys,StackFooter:Fs,StackContent:Ds,Table:Us,TableCell:zs,TableColumn:Hs,TableColumns:Os,TableRow:Bs,TableRows:Ws,TabList:Ns,TabProvider:Gs,Tabs:Qs,TabTrigger:js,Textarea:Ks,TimePicker:qs,ToggleGroup:Js,ToggleItem:Xs,Widget:Zs,registerIconSet:$s,registerIconSetFromStrings:el}=__STATAMIC__.ui,I=window.Vue,{BaseTransition:tl,BaseTransitionPropsValidators:sl,Comment:ll,DeprecationTypes:ol,EffectScope:rl,ErrorCodes:il,ErrorTypeStrings:al,Fragment:nl,KeepAlive:dl,ReactiveEffect:ul,Static:pl,Suspense:cl,Teleport:ml,Text:hl,TrackOpTypes:fl,Transition:bl,TransitionGroup:yl,TriggerOpTypes:gl,VueElement:kl,__esModule:xl,assertNumber:vl,callWithAsyncErrorHandling:Sl,callWithErrorHandling:_l,camelize:Tl,capitalize:Cl,cloneVNode:wl,compatUtils:Rl,compile:Al,computed:Pl,createApp:Vl,createBlock:p,createCommentVNode:d,createElementBlock:r,createElementVNode:l,createHydrationRenderer:Il,createPropsRestProxy:Ll,createRenderer:El,createSSRApp:Ml,createSlots:Yl,createStaticVNode:Fl,createTextVNode:v,createVNode:n,customRef:Dl,defineAsyncComponent:Ul,defineComponent:zl,defineCustomElement:Hl,defineEmits:Ol,defineExpose:Bl,defineModel:Wl,defineOptions:Nl,defineProps:Gl,defineSSRCustomElement:Ql,defineSlots:jl,devtools:Kl,effect:ql,effectScope:Jl,getCurrentInstance:Xl,getCurrentScope:Zl,getCurrentWatcher:$l,getTransitionRawChildren:eo,guardReactiveProps:to,h:so,handleError:lo,hasInjectionContext:oo,hydrate:ro,hydrateOnIdle:io,hydrateOnInteraction:ao,hydrateOnMediaQuery:no,hydrateOnVisible:uo,initCustomFormatter:po,initDirectivesForSSR:co,inject:mo,isMemoSame:ho,isProxy:fo,isReactive:bo,isReadonly:yo,isRef:go,isRuntimeOnly:ko,isShallow:xo,isVNode:vo,markRaw:So,mergeDefaults:_o,mergeModels:To,mergeProps:Co,nextTick:wo,nodeOps:Ro,normalizeClass:Ao,normalizeProps:Po,normalizeStyle:Vo,onActivated:Io,onBeforeMount:Lo,onBeforeUnmount:Eo,onBeforeUpdate:Mo,onDeactivated:Yo,onErrorCaptured:Fo,onMounted:Do,onRenderTracked:Uo,onRenderTriggered:zo,onScopeDispose:Ho,onServerPrefetch:Oo,onUnmounted:Bo,onUpdated:Wo,onWatcherCleanup:No,openBlock:o,patchProp:Go,popScopeId:Qo,provide:jo,proxyRefs:Ko,pushScopeId:qo,queuePostFlushCb:Jo,reactive:Xo,readonly:Zo,ref:$o,registerRuntimeCompiler:er,render:tr,renderList:sr,renderSlot:lr,resolveComponent:m,resolveDirective:or,resolveDynamicComponent:rr,resolveFilter:ir,resolveTransitionHooks:ar,setBlockTracking:nr,setDevtoolsHook:dr,setTransitionHooks:ur,shallowReactive:pr,shallowReadonly:cr,shallowRef:mr,ssrContextKey:hr,ssrUtils:fr,stop:br,toDisplayString:u,toHandlerKey:yr,toHandlers:gr,toRaw:kr,toRef:xr,toRefs:vr,toValue:Sr,transformVNodeArgs:_r,triggerRef:Tr,unref:Cr,useAttrs:wr,useCssModule:Rr,useCssVars:Ar,useHost:Pr,useId:Vr,useModel:Ir,useSSRContext:Lr,useShadowRoot:Er,useSlots:Mr,useTemplateRef:Yr,useTransitionState:Fr,vModelCheckbox:Dr,vModelDynamic:Ur,vModelRadio:zr,vModelSelect:Hr,vModelText:Or,vShow:Br,version:Wr,warn:Nr,watch:Gr,watchEffect:Qr,watchPostEffect:jr,watchSyncEffect:Kr,withAsyncContext:qr,withCtx:c,withDefaults:Jr,withDirectives:Xr,withKeys:Zr,withMemo:$r,withModifiers:ei,withScopeId:ti}=I,A=(s,e)=>{const k=s.__vccOpts||s;for(const[x,t]of e)k[x]=t;return k},L={mixins:[_],components:{Alert:T,Button:C,Card:w,Icon:R,Input:P,Select:V},data(){return{episodes:[],searchQuery:"",episodeStatus:"published",episodeLimit:20,selectedEpisodeId:null,loading:!1,searchingPlatforms:!1,searchingYouTube:!1,error:null,searchTimeout:null,platformResults:null,platformWarnings:null,selectedYouTube:null,selectedSpotify:null,selectedApple:null,manualYouTube:"",manualSpotify:"",manualApple:""}},computed:{statusOptions(){return[{value:"published",label:"Published"},{value:"scheduled",label:"Scheduled"},{value:"draft",label:"Draft"},{value:"all",label:"All Episodes"}]},limitOptions(){return[{value:20,label:"20"},{value:50,label:"50"},{value:100,label:"100"}]},episodeOptions(){return this.episodes.map(s=>({value:s.id,label:`${s.title} (${this.formatDate(s.published_at)})`}))},youtubeOptions(){return(this.platformResults?.youtube||[]).map(s=>({value:s.url,label:`${s.title} (${s.score}% match)`}))},spotifyOptions(){return(this.platformResults?.spotify||[]).map(s=>({value:s.url,label:`${s.title} (${s.score}% match)`}))},appleOptions(){return(this.platformResults?.apple_podcasts||[]).map(s=>({value:s.url,label:`${s.title} (${s.score}% match)`}))}},mounted(){this.loadEpisodes(),this.value&&this.value.episode_id&&(this.selectedEpisodeId=this.value.episode_id,this.selectedYouTube=this.value.youtube_link||null,this.selectedSpotify=this.value.spotify_link||null,this.selectedApple=this.value.apple_podcasts_link||null,this.manualYouTube=this.value.youtube_link||"",this.manualSpotify=this.value.spotify_link||"",this.manualApple=this.value.apple_podcasts_link||"")},methods:{async loadEpisodes(s=""){this.loading=!0,this.error=null;try{const e=await this.$axios.get("/cp/podcast-link-finder/search-episodes",{params:{query:s,status:this.episodeStatus,limit:this.episodeLimit}});this.episodes=e.data.episodes||[]}catch(e){this.error="Failed to load episodes. Please check your API credentials.",console.error(e)}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadEpisodes(this.searchQuery)},500)},async onEpisodeSelected(){if(!this.selectedEpisodeId){this.$emit("update:value",{episode_id:null,episode_title:null,spotify_link:null,apple_podcasts_link:null,youtube_link:null}),this.platformResults=null,this.selectedYouTube=null,this.selectedSpotify=null,this.selectedApple=null,this.manualYouTube="",this.manualSpotify="",this.manualApple="";return}const s=this.episodes.find(e=>e.id===this.selectedEpisodeId);this.$emit("update:value",{episode_id:s.id,episode_title:s.title,spotify_link:null,apple_podcasts_link:null,youtube_link:null}),this.platformResults=null,this.platformWarnings=null,this.selectedYouTube=null,this.selectedSpotify=null,this.selectedApple=null,this.manualYouTube="",this.manualSpotify="",this.manualApple="",this.config.auto_find!==!1&&await this.searchAllPlatforms()},async searchAllPlatforms(s=!1){this.searchingPlatforms=!0,this.error=null;try{const e=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId,force_youtube:s});e.data.success&&(this.platformResults=e.data.results,this.platformWarnings=e.data.warnings||null,this.config.auto_find!==!1&&(this.platformResults.youtube.length>0&&(this.selectedYouTube=this.platformResults.youtube[0].url,this.onYouTubeSelected()),this.platformResults.spotify.length>0&&(this.selectedSpotify=this.platformResults.spotify[0].url,this.onSpotifySelected()),this.platformResults.apple_podcasts.length>0&&(this.selectedApple=this.platformResults.apple_podcasts[0].url,this.onAppleSelected())))}catch(e){this.error="Failed to search platforms. You can enter links manually.",console.error(e)}finally{this.searchingPlatforms=!1}},async forceYouTubeSearch(){this.searchingYouTube=!0;try{const s=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId,force_youtube:!0});s.data.success&&(this.platformResults.youtube=s.data.results.youtube||[],this.platformWarnings&&(this.platformWarnings.youtube=null),this.platformResults.youtube.length>0&&(this.selectedYouTube=this.platformResults.youtube[0].url,this.onYouTubeSelected()))}catch(s){console.error("YouTube search failed:",s)}finally{this.searchingYouTube=!1}},onYouTubeSelected(){this.manualYouTube=this.selectedYouTube||"",this.updateLinks()},onSpotifySelected(){this.manualSpotify=this.selectedSpotify||"",this.updateLinks()},onAppleSelected(){this.manualApple=this.selectedApple||"",this.updateLinks()},onManualYouTubeInput(){this.selectedYouTube=this.manualYouTube,this.updateLinks()},onManualSpotifyInput(){this.selectedSpotify=this.manualSpotify,this.updateLinks()},onManualAppleInput(){this.selectedApple=this.manualApple,this.updateLinks()},updateLinks(){this.$emit("update:value",{...this.value,spotify_link:this.selectedSpotify||null,apple_podcasts_link:this.selectedApple||null,youtube_link:this.selectedYouTube||null})},formatDate(s){return s?new Date(s).toLocaleDateString():""}}},E={class:"podcast-link-finder"},M={class:"mb-6"},Y={class:"flex gap-2 mb-2"},F={class:"flex-1 min-w-0"},D={class:"shrink-0"},U={class:"shrink-0"},z={key:0,class:"flex items-center py-2 text-gray-600 dark:text-gray-400"},H={class:"flex items-center justify-between"},O={class:"font-medium text-gray-900 dark:text-gray-100"},B={class:"flex items-center text-blue-700 dark:text-blue-300"},W={key:2,class:"space-y-4"},N={class:"flex items-center gap-2 px-4 py-3 border-b border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300"},G={key:0,class:"ml-auto text-xs px-2 py-1 rounded bg-white/50 dark:bg-black/30"},Q={key:0,class:"p-4"},j={key:0,class:"mt-2 flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300"},K=["href"],q={key:1,class:"p-4"},J={class:"flex items-center justify-between gap-4"},X={key:1,class:"text-xs"},Z={key:1,class:"text-gray-500 dark:text-gray-400 text-sm"},$={class:"flex items-center gap-2 px-4 py-3 border-b border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300"},ee={key:0,class:"ml-auto text-xs px-2 py-1 rounded bg-white/50 dark:bg-black/30"},te={key:0,class:"p-4"},se={key:0,class:"mt-2 flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300"},le=["href"],oe={key:1,class:"p-4 text-gray-500 dark:text-gray-400 text-sm"},re={class:"flex items-center gap-2 px-4 py-3 border-b border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300"},ie={key:0,class:"ml-auto text-xs px-2 py-1 rounded bg-white/50 dark:bg-black/30"},ae={key:0,class:"p-4"},ne={key:0,class:"mt-2 flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300"},de=["href"],ue={key:1,class:"p-4 text-gray-500 dark:text-gray-400 text-sm"},pe={key:3,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},ce={class:"mt-4 space-y-4"};function me(s,e,k,x,t,i){const f=m("Input"),h=m("Select"),b=m("Icon"),y=m("Button"),g=m("Card"),S=m("Alert");return o(),r("div",E,[l("div",M,[e[13]||(e[13]=l("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-2 block"},"Select Episode from Transistor",-1)),l("div",Y,[l("div",F,[n(f,{modelValue:t.searchQuery,"onUpdate:modelValue":[e[0]||(e[0]=a=>t.searchQuery=a),i.debouncedSearch],placeholder:"Search episodes..."},null,8,["modelValue","onUpdate:modelValue"])]),l("div",D,[n(h,{modelValue:t.episodeStatus,"onUpdate:modelValue":[e[1]||(e[1]=a=>t.episodeStatus=a),e[2]||(e[2]=a=>i.loadEpisodes(t.searchQuery))],options:i.statusOptions},null,8,["modelValue","options"])]),l("div",U,[n(h,{modelValue:t.episodeLimit,"onUpdate:modelValue":[e[3]||(e[3]=a=>t.episodeLimit=a),e[4]||(e[4]=a=>i.loadEpisodes(t.searchQuery))],options:i.limitOptions},null,8,["modelValue","options"])])]),t.loading?(o(),r("div",z,[n(b,{name:"loading",class:"size-4 mr-2"}),e[12]||(e[12]=l("span",{class:"text-sm"},"Loading episodes...",-1))])):(o(),p(h,{key:1,modelValue:t.selectedEpisodeId,"onUpdate:modelValue":[e[5]||(e[5]=a=>t.selectedEpisodeId=a),i.onEpisodeSelected],options:i.episodeOptions,placeholder:"Select an episode..."},null,8,["modelValue","onUpdate:modelValue","options"]))]),s.value.episode_title?(o(),p(g,{key:0,class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"},{default:c(()=>[l("div",H,[l("div",null,[e[14]||(e[14]=l("div",{class:"text-xs uppercase tracking-wide text-gray-600 dark:text-gray-400 mb-1"},"Selected Episode",-1)),l("div",O,u(s.value.episode_title),1)]),!t.searchingPlatforms&&!t.platformResults?(o(),p(y,{key:0,onClick:i.searchAllPlatforms,variant:"primary",text:"Search Platforms"},null,8,["onClick"])):d("",!0)])]),_:1})):d("",!0),t.searchingPlatforms?(o(),p(g,{key:1,class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"},{default:c(()=>[l("div",B,[n(b,{name:"loading",class:"size-4 mr-3"}),e[15]||(e[15]=l("span",{class:"text-sm"},"Searching across platforms...",-1))])]),_:1})):d("",!0),t.platformResults?(o(),r("div",W,[e[22]||(e[22]=l("div",{class:"text-xs uppercase tracking-wide text-gray-600 dark:text-gray-400 mb-2"},"Platform Links",-1)),n(g,{inset:!0,class:"p-0 overflow-hidden"},{default:c(()=>[l("div",N,[e[16]||(e[16]=l("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})],-1)),e[17]||(e[17]=l("span",{class:"font-semibold"},"YouTube",-1)),t.platformResults.youtube.length>0?(o(),r("span",G,u(t.platformResults.youtube.length)+" found ",1)):d("",!0)]),t.platformResults.youtube.length>0?(o(),r("div",Q,[n(h,{modelValue:t.selectedYouTube,"onUpdate:modelValue":[e[6]||(e[6]=a=>t.selectedYouTube=a),i.onYouTubeSelected],options:i.youtubeOptions,placeholder:"Select a video..."},null,8,["modelValue","onUpdate:modelValue","options"]),t.selectedYouTube?(o(),r("div",j,[n(b,{name:"check-circle",class:"size-4 text-green-600 dark:text-green-400"}),l("a",{href:t.selectedYouTube,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 dark:text-blue-400 hover:underline truncate"},u(t.selectedYouTube),9,K)])):d("",!0)])):(o(),r("div",q,[t.platformWarnings&&t.platformWarnings.youtube?(o(),p(S,{key:0,variant:"warning"},{default:c(()=>[l("div",J,[l("span",null,u(t.platformWarnings.youtube),1),t.searchingYouTube?(o(),r("span",X,"Searching...")):(o(),p(y,{key:0,onClick:i.forceYouTubeSearch,variant:"primary",size:"sm",text:"Search Anyway"},null,8,["onClick"]))])]),_:1})):(o(),r("div",Z," No matches found "))]))]),_:1}),n(g,{inset:!0,class:"p-0 overflow-hidden"},{default:c(()=>[l("div",$,[e[18]||(e[18]=l("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})],-1)),e[19]||(e[19]=l("span",{class:"font-semibold"},"Spotify",-1)),t.platformResults.spotify.length>0?(o(),r("span",ee,u(t.platformResults.spotify.length)+" found ",1)):d("",!0)]),t.platformResults.spotify.length>0?(o(),r("div",te,[n(h,{modelValue:t.selectedSpotify,"onUpdate:modelValue":[e[7]||(e[7]=a=>t.selectedSpotify=a),i.onSpotifySelected],options:i.spotifyOptions,placeholder:"Select an episode..."},null,8,["modelValue","onUpdate:modelValue","options"]),t.selectedSpotify?(o(),r("div",se,[n(b,{name:"check-circle",class:"size-4 text-green-600 dark:text-green-400"}),l("a",{href:t.selectedSpotify,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 dark:text-blue-400 hover:underline truncate"},u(t.selectedSpotify),9,le)])):d("",!0)])):(o(),r("div",oe," No matches found "))]),_:1}),n(g,{inset:!0,class:"p-0 overflow-hidden"},{default:c(()=>[l("div",re,[e[20]||(e[20]=l("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})],-1)),e[21]||(e[21]=l("span",{class:"font-semibold"},"Apple Podcasts",-1)),t.platformResults.apple_podcasts.length>0?(o(),r("span",ie,u(t.platformResults.apple_podcasts.length)+" found ",1)):d("",!0)]),t.platformResults.apple_podcasts.length>0?(o(),r("div",ae,[n(h,{modelValue:t.selectedApple,"onUpdate:modelValue":[e[8]||(e[8]=a=>t.selectedApple=a),i.onAppleSelected],options:i.appleOptions,placeholder:"Select an episode..."},null,8,["modelValue","onUpdate:modelValue","options"]),t.selectedApple?(o(),r("div",ne,[n(b,{name:"check-circle",class:"size-4 text-green-600 dark:text-green-400"}),l("a",{href:t.selectedApple,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 dark:text-blue-400 hover:underline truncate"},u(t.selectedApple),9,de)])):d("",!0)])):(o(),r("div",ue," No matches found "))]),_:1})])):d("",!0),s.config.allow_manual_override&&s.value.episode_id?(o(),r("div",pe,[l("details",null,[e[26]||(e[26]=l("summary",{class:"cursor-pointer text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 select-none"}," Enter links manually ",-1)),l("div",ce,[l("div",null,[e[23]||(e[23]=l("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-1 block"},"YouTube URL",-1)),n(f,{type:"url",modelValue:t.manualYouTube,"onUpdate:modelValue":[e[9]||(e[9]=a=>t.manualYouTube=a),i.onManualYouTubeInput],placeholder:"https://www.youtube.com/watch?v=..."},null,8,["modelValue","onUpdate:modelValue"])]),l("div",null,[e[24]||(e[24]=l("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-1 block"},"Spotify URL",-1)),n(f,{type:"url",modelValue:t.manualSpotify,"onUpdate:modelValue":[e[10]||(e[10]=a=>t.manualSpotify=a),i.onManualSpotifyInput],placeholder:"https://open.spotify.com/episode/..."},null,8,["modelValue","onUpdate:modelValue"])]),l("div",null,[e[25]||(e[25]=l("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-1 block"},"Apple Podcasts URL",-1)),n(f,{type:"url",modelValue:t.manualApple,"onUpdate:modelValue":[e[11]||(e[11]=a=>t.manualApple=a),i.onManualAppleInput],placeholder:"https://podcasts.apple.com/..."},null,8,["modelValue","onUpdate:modelValue"])])])])])):d("",!0),t.error?(o(),p(S,{key:4,variant:"danger",class:"mt-4"},{default:c(()=>[v(u(t.error),1)]),_:1})):d("",!0)])}const he=A(L,[["render",me]]),fe={mixins:[_],components:{Alert:T,Button:C,Card:w,Icon:R},data(){return{fetching:!1,error:null}},methods:{async fetchLivestream(){if(!this.meta.entryId){this.error="Please save the entry first before fetching the livestream.";return}this.fetching=!0,this.error=null;try{const s=await this.$axios.post(`/cp/podcast-link-finder/youtube-livestream/${this.meta.entryId}`);s.data.success?this.$emit("update:value",s.data.url):this.error=s.data.message||"Failed to fetch livestream"}catch(s){console.error("Livestream fetch error:",s),s.response&&s.response.data&&s.response.data.message?this.error=s.response.data.message:this.error="Failed to fetch livestream. Please try again."}finally{this.fetching=!1}},clearUrl(){this.$emit("update:value",null),this.error=null}}},be={class:"youtube-livestream-fieldtype"},ye={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ge={class:"flex items-center justify-between gap-4"},ke={key:1,class:"flex items-center text-xs text-blue-600 dark:text-blue-300"},xe={class:"flex items-center gap-3"},ve={class:"flex-1 min-w-0"},Se=["href"],_e={key:3,class:"text-sm text-gray-500 dark:text-gray-400"},Te={key:0},Ce={key:1};function we(s,e,k,x,t,i){const f=m("Button"),h=m("Icon"),b=m("Alert"),y=m("Card");return o(),r("div",be,[s.meta.enabled?!s.value&&s.meta.showButton?(o(),p(y,{key:1,class:"p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"},{default:c(()=>[l("div",ge,[e[1]||(e[1]=l("div",{class:"flex-1"},[l("div",{class:"text-sm font-medium text-blue-800 dark:text-blue-300"}," Fetch YouTube Livestream "),l("div",{class:"text-xs mt-0.5 text-blue-600 dark:text-blue-400"}," Auto-fetch the scheduled livestream for this message's air date ")],-1)),t.fetching?(o(),r("span",ke,[n(h,{name:"loading",class:"size-4 mr-2"}),e[0]||(e[0]=v(" Fetching... ",-1))])):(o(),p(f,{key:0,onClick:i.fetchLivestream,variant:"primary",size:"sm",text:"Fetch Livestream"},null,8,["onClick"]))]),t.error?(o(),p(b,{key:0,variant:"danger",class:"mt-3"},{default:c(()=>[v(u(t.error),1)]),_:1})):d("",!0)]),_:1})):s.value?(o(),p(y,{key:2,class:"p-4 bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"},{default:c(()=>[l("div",xe,[n(h,{name:"check-circle",class:"size-5 text-green-600 dark:text-green-400 flex-shrink-0"}),l("div",ve,[e[2]||(e[2]=l("div",{class:"text-sm font-medium text-green-800 dark:text-green-300"}," YouTube Livestream ",-1)),l("a",{href:s.value,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate block"},u(s.value),9,Se)]),n(f,{onClick:i.clearUrl,variant:"ghost",size:"sm",icon:"x",title:"Clear URL"},null,8,["onClick"])])]),_:1})):(o(),r("div",_e,[s.meta.airDate?(o(),r("span",Ce,"Air date is in the past")):(o(),r("span",Te,"Set an air date to enable livestream fetch"))])):(o(),r("div",ye," YouTube Livestream fetch is disabled "))])}const Re=A(fe,[["render",we]]);Statamic.$components.register("podcast_link_finder-fieldtype",he);Statamic.$components.register("you_tube_livestream-fieldtype",Re);

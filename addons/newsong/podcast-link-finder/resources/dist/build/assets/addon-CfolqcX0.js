function r(a,e,t,s,i,l,o,f){var n=typeof a=="function"?a.options:a;return e&&(n.render=e,n.staticRenderFns=t,n._compiled=!0),n._scopeId="data-v-"+l,{exports:a,options:n}}const u={mixins:[Fieldtype],data(){return{episodes:[],searchQuery:"",selectedEpisodeId:null,loading:!1,searchingPlatforms:!1,error:null,searchTimeout:null,platformResults:null,selectedYouTube:null,selectedSpotify:null,selectedApple:null,manualYouTube:"",manualSpotify:"",manualApple:""}},mounted(){this.loadEpisodes(),this.value&&this.value.episode_id&&(this.selectedEpisodeId=this.value.episode_id,this.selectedYouTube=this.value.youtube_link||null,this.selectedSpotify=this.value.spotify_link||null,this.selectedApple=this.value.apple_podcasts_link||null,this.manualYouTube=this.value.youtube_link||"",this.manualSpotify=this.value.spotify_link||"",this.manualApple=this.value.apple_podcasts_link||"")},methods:{async loadEpisodes(a=""){this.loading=!0,this.error=null;try{const e=await this.$axios.get("/cp/podcast-link-finder/search-episodes",{params:{query:a}});this.episodes=e.data.episodes||[]}catch(e){this.error="Failed to load episodes. Please check your API credentials.",console.error(e)}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadEpisodes(this.searchQuery)},500)},async onEpisodeSelected(){if(!this.selectedEpisodeId){this.update({episode_id:null,episode_title:null,spotify_link:null,apple_podcasts_link:null,youtube_link:null}),this.platformResults=null,this.selectedYouTube=null,this.selectedSpotify=null,this.selectedApple=null,this.manualYouTube="",this.manualSpotify="",this.manualApple="";return}const a=this.episodes.find(e=>e.id===this.selectedEpisodeId);this.update({episode_id:a.id,episode_title:a.title,spotify_link:null,apple_podcasts_link:null,youtube_link:null}),this.platformResults=null,this.selectedYouTube=null,this.selectedSpotify=null,this.selectedApple=null,this.manualYouTube="",this.manualSpotify="",this.manualApple="",this.config.auto_find!==!1&&await this.searchAllPlatforms()},async searchAllPlatforms(){this.searchingPlatforms=!0,this.error=null;try{const a=await this.$axios.post("/cp/podcast-link-finder/search-platforms",{episode_id:this.selectedEpisodeId});a.data.success&&(this.platformResults=a.data.results,this.config.auto_find!==!1&&(this.platformResults.youtube.length>0&&(this.selectedYouTube=this.platformResults.youtube[0].url,this.onYouTubeSelected()),this.platformResults.spotify.length>0&&(this.selectedSpotify=this.platformResults.spotify[0].url,this.onSpotifySelected()),this.platformResults.apple_podcasts.length>0&&(this.selectedApple=this.platformResults.apple_podcasts[0].url,this.onAppleSelected())))}catch(a){this.error="Failed to search platforms. You can enter links manually.",console.error(a)}finally{this.searchingPlatforms=!1}},onYouTubeSelected(){this.manualYouTube=this.selectedYouTube||"",this.updateLinks()},onSpotifySelected(){this.manualSpotify=this.selectedSpotify||"",this.updateLinks()},onAppleSelected(){this.manualApple=this.selectedApple||"",this.updateLinks()},onManualYouTubeInput(){this.selectedYouTube=this.manualYouTube,this.updateLinks()},onManualSpotifyInput(){this.selectedSpotify=this.manualSpotify,this.updateLinks()},onManualAppleInput(){this.selectedApple=this.manualApple,this.updateLinks()},updateLinks(){this.update({...this.value,spotify_link:this.selectedSpotify||null,apple_podcasts_link:this.selectedApple||null,youtube_link:this.selectedYouTube||null})},formatDate(a){return a?new Date(a).toLocaleDateString():""}}};var p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"podcast-link-finder"},[t("div",{staticClass:"mb-6"},[t("label",{staticClass:"publish-field-label"},[e._v("Select Episode from Transistor")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"input-text mb-2",attrs:{type:"text",placeholder:"Search episodes..."},domProps:{value:e.searchQuery},on:{input:[function(s){s.target.composing||(e.searchQuery=s.target.value)},e.debouncedSearch]}}),e.loading?t("div",{staticClass:"text-gray-600 text-sm py-2"},[e._v(" Loading episodes... ")]):t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedEpisodeId,expression:"selectedEpisodeId"}],staticClass:"input-text",on:{change:[function(s){var i=Array.prototype.filter.call(s.target.options,function(l){return l.selected}).map(function(l){var o="_value"in l?l._value:l.value;return o});e.selectedEpisodeId=s.target.multiple?i:i[0]},e.onEpisodeSelected]}},[t("option",{domProps:{value:null}},[e._v("-- Select an episode --")]),e._l(e.episodes,function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.title)+" ("+e._s(e.formatDate(s.published_at))+") ")])})],2)]),e.value.episode_title?t("div",{staticClass:"selected-episode"},[t("div",{staticClass:"flex items-center justify-between"},[t("div",[t("div",{staticClass:"text-xs uppercase tracking-wide text-gray-600 mb-1"},[e._v("Selected Episode")]),t("div",{staticClass:"font-medium"},[e._v(e._s(e.value.episode_title))])]),!e.searchingPlatforms&&!e.platformResults?t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.searchAllPlatforms}},[e._v(" Search Platforms ")]):e._e()])]):e._e(),e.searchingPlatforms?t("div",{staticClass:"status-box searching"},[t("div",{staticClass:"flex items-center"},[t("svg",{staticClass:"animate-spin h-4 w-4 mr-3 text-blue-600",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[t("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),t("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}})]),t("span",{staticClass:"text-sm"},[e._v("Searching across platforms...")])])]):e._e(),e.platformResults?t("div",{staticClass:"space-y-4"},[t("div",{staticClass:"text-xs uppercase tracking-wide text-gray-600 mb-2"},[e._v("Platform Links")]),t("div",{staticClass:"platform-card"},[t("div",{staticClass:"platform-header youtube"},[t("svg",{staticClass:"w-5 h-5",attrs:{viewBox:"0 0 24 24",fill:"currentColor"}},[t("path",{attrs:{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"}})]),t("span",{staticClass:"font-semibold"},[e._v("YouTube")]),e.platformResults.youtube.length>0?t("span",{staticClass:"result-count"},[e._v(" "+e._s(e.platformResults.youtube.length)+" found ")]):e._e()]),e.platformResults.youtube.length>0?t("div",{staticClass:"platform-body"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedYouTube,expression:"selectedYouTube"}],staticClass:"input-text",on:{change:[function(s){var i=Array.prototype.filter.call(s.target.options,function(l){return l.selected}).map(function(l){var o="_value"in l?l._value:l.value;return o});e.selectedYouTube=s.target.multiple?i:i[0]},e.onYouTubeSelected]}},[t("option",{domProps:{value:null}},[e._v("-- Select a video --")]),e._l(e.platformResults.youtube,function(s,i){return t("option",{key:i,domProps:{value:s.url}},[e._v(" "+e._s(s.title)+" ("+e._s(s.score)+"% match) ")])})],2),e.selectedYouTube?t("div",{staticClass:"selected-link"},[t("svg",{staticClass:"w-3 h-3 text-green-600",attrs:{fill:"currentColor",viewBox:"0 0 20 20"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"}})]),t("a",{attrs:{href:e.selectedYouTube,target:"_blank",rel:"noopener noreferrer"}},[e._v(" "+e._s(e.selectedYouTube)+" ")])]):e._e()]):t("div",{staticClass:"platform-body text-gray-500 text-sm"},[e._v(" No matches found ")])]),t("div",{staticClass:"platform-card"},[t("div",{staticClass:"platform-header spotify"},[t("svg",{staticClass:"w-5 h-5",attrs:{viewBox:"0 0 24 24",fill:"currentColor"}},[t("path",{attrs:{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"}})]),t("span",{staticClass:"font-semibold"},[e._v("Spotify")]),e.platformResults.spotify.length>0?t("span",{staticClass:"result-count"},[e._v(" "+e._s(e.platformResults.spotify.length)+" found ")]):e._e()]),e.platformResults.spotify.length>0?t("div",{staticClass:"platform-body"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedSpotify,expression:"selectedSpotify"}],staticClass:"input-text",on:{change:[function(s){var i=Array.prototype.filter.call(s.target.options,function(l){return l.selected}).map(function(l){var o="_value"in l?l._value:l.value;return o});e.selectedSpotify=s.target.multiple?i:i[0]},e.onSpotifySelected]}},[t("option",{domProps:{value:null}},[e._v("-- Select an episode --")]),e._l(e.platformResults.spotify,function(s,i){return t("option",{key:i,domProps:{value:s.url}},[e._v(" "+e._s(s.title)+" ("+e._s(s.score)+"% match) ")])})],2),e.selectedSpotify?t("div",{staticClass:"selected-link"},[t("svg",{staticClass:"w-3 h-3 text-green-600",attrs:{fill:"currentColor",viewBox:"0 0 20 20"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"}})]),t("a",{attrs:{href:e.selectedSpotify,target:"_blank",rel:"noopener noreferrer"}},[e._v(" "+e._s(e.selectedSpotify)+" ")])]):e._e()]):t("div",{staticClass:"platform-body text-gray-500 text-sm"},[e._v(" No matches found ")])]),t("div",{staticClass:"platform-card"},[t("div",{staticClass:"platform-header apple"},[t("svg",{staticClass:"w-5 h-5",attrs:{viewBox:"0 0 24 24",fill:"currentColor"}},[t("path",{attrs:{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"}})]),t("span",{staticClass:"font-semibold"},[e._v("Apple Podcasts")]),e.platformResults.apple_podcasts.length>0?t("span",{staticClass:"result-count"},[e._v(" "+e._s(e.platformResults.apple_podcasts.length)+" found ")]):e._e()]),e.platformResults.apple_podcasts.length>0?t("div",{staticClass:"platform-body"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedApple,expression:"selectedApple"}],staticClass:"input-text",on:{change:[function(s){var i=Array.prototype.filter.call(s.target.options,function(l){return l.selected}).map(function(l){var o="_value"in l?l._value:l.value;return o});e.selectedApple=s.target.multiple?i:i[0]},e.onAppleSelected]}},[t("option",{domProps:{value:null}},[e._v("-- Select an episode --")]),e._l(e.platformResults.apple_podcasts,function(s,i){return t("option",{key:i,domProps:{value:s.url}},[e._v(" "+e._s(s.title)+" ("+e._s(s.score)+"% match) ")])})],2),e.selectedApple?t("div",{staticClass:"selected-link"},[t("svg",{staticClass:"w-3 h-3 text-green-600",attrs:{fill:"currentColor",viewBox:"0 0 20 20"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"}})]),t("a",{attrs:{href:e.selectedApple,target:"_blank",rel:"noopener noreferrer"}},[e._v(" "+e._s(e.selectedApple)+" ")])]):e._e()]):t("div",{staticClass:"platform-body text-gray-500 text-sm"},[e._v(" No matches found ")])])]):e._e(),e.config.allow_manual_override&&e.value.episode_id?t("div",{staticClass:"manual-override"},[t("details",[t("summary",{staticClass:"cursor-pointer text-sm text-gray-600 hover:text-gray-800 select-none"},[e._v(" Enter links manually ")]),t("div",{staticClass:"mt-4 space-y-3"},[t("div",[t("label",{staticClass:"publish-field-label text-sm"},[e._v("YouTube URL")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.manualYouTube,expression:"manualYouTube"}],staticClass:"input-text",attrs:{type:"url",placeholder:"https://www.youtube.com/watch?v=..."},domProps:{value:e.manualYouTube},on:{input:[function(s){s.target.composing||(e.manualYouTube=s.target.value)},e.onManualYouTubeInput]}})]),t("div",[t("label",{staticClass:"publish-field-label text-sm"},[e._v("Spotify URL")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.manualSpotify,expression:"manualSpotify"}],staticClass:"input-text",attrs:{type:"url",placeholder:"https://open.spotify.com/episode/..."},domProps:{value:e.manualSpotify},on:{input:[function(s){s.target.composing||(e.manualSpotify=s.target.value)},e.onManualSpotifyInput]}})]),t("div",[t("label",{staticClass:"publish-field-label text-sm"},[e._v("Apple Podcasts URL")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.manualApple,expression:"manualApple"}],staticClass:"input-text",attrs:{type:"url",placeholder:"https://podcasts.apple.com/..."},domProps:{value:e.manualApple},on:{input:[function(s){s.target.composing||(e.manualApple=s.target.value)},e.onManualAppleInput]}})])])])]):e._e(),e.error?t("div",{staticClass:"status-box error"},[t("div",{staticClass:"flex items-start"},[t("svg",{staticClass:"w-5 h-5 mr-2 flex-shrink-0",attrs:{fill:"currentColor",viewBox:"0 0 20 20"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"}})]),t("span",{staticClass:"text-sm"},[e._v(e._s(e.error))])])]):e._e()])},c=[],d=r(u,p,c,!1,null,"a34160be");const m=d.exports;Statamic.$components.register("podcast_link_finder-fieldtype",m);
